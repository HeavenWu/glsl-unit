var COMPILED=true,goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var f=a;f=f.substring(0,f.lastIndexOf("."));){if(goog.getObjectByName(f))break;goog.implicitNamespaces_[f]=true}}goog.exportPath_(a)};
goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};if(!COMPILED)goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={};goog.exportPath_=function(a,f,e){a=a.split(".");e=e||goog.global;!(a[0]in e)&&e.execScript&&e.execScript("var "+a[0]);for(var h;a.length&&(h=a.shift());)!a.length&&goog.isDef(f)?e[h]=f:e=e[h]?e[h]:e[h]={}};
goog.getObjectByName=function(a,f){for(var e=a.split("."),h=f||goog.global,m;m=e.shift();)if(goog.isDefAndNotNull(h[m]))h=h[m];else return null;return h};goog.globalize=function(a,f){var e=f||goog.global,h;for(h in a)e[h]=a[h]};
goog.addDependency=function(a,f,e){if(!COMPILED){for(var h,a=a.replace(/\\/g,"/"),m=goog.dependencies_,i=0;h=f[i];i++)m.nameToPath[h]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][h]=true;for(h=0;f=e[h];h++)a in m.requires||(m.requires[a]={}),m.requires[a][f]=true}};goog.ENABLE_DEBUG_LOADER=true;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var f=goog.getPathFromDeps_(a);if(f){goog.included_[f]=true;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER)goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),f=a.length-1;f>=0;--f){var e=a[f].src,h=e.lastIndexOf("?"),
h=h==-1?e.length:h;if(e.substr(h-7,7)=="base.js"){goog.basePath=e.substr(0,h-7);break}}},goog.importScript_=function(a){var f=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&f(a)&&(goog.dependencies_.written[a]=true)},goog.writeScriptTag_=function(a){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+a+'"><\/script>'),true):false},goog.writeScripts_=function(){function a(i){if(!(i in h.written)){if(!(i in h.visited)&&
(h.visited[i]=true,i in h.requires))for(var m in h.requires[i])if(!goog.isProvided_(m))if(m in h.nameToPath)a(h.nameToPath[m]);else throw Error("Undefined nameToPath for "+m);i in e||(e[i]=true,f.push(i))}}var f=[],e={},h=goog.dependencies_,m;for(m in goog.included_)h.written[m]||a(m);for(m=0;m<f.length;m++)if(f[m])goog.importScript_(goog.basePath+f[m]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:
null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js");
goog.typeOf=function(a){var f=typeof a;if(f=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return f;var e=Object.prototype.toString.call(a);if(e=="[object Window]")return"object";if(e=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(e=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(f=="function"&&typeof a.call=="undefined")return"object";return f};goog.propertyIsEnumerableCustom_=function(a,f){if(f in a)for(var e in a)if(e==f&&Object.prototype.hasOwnProperty.call(a,f))return true;return false};goog.propertyIsEnumerable_=function(a,f){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,f):goog.propertyIsEnumerableCustom_(a,f)};goog.isDef=function(a){return a!==void 0};goog.isNull=function(a){return a===null};
goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(a){var f=goog.typeOf(a);return f=="array"||f=="object"&&typeof a.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};
goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(a){a=goog.typeOf(a);return a=="object"||a=="array"||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(f){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var f=goog.typeOf(a);if(f=="object"||f=="array"){if(a.clone)return a.clone();var f=f=="array"?[]:{},e;for(e in a)f[e]=goog.cloneObject(a[e]);return f}return a};goog.bindNative_=function(a,f,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,f,e){if(!a)throw Error();if(arguments.length>2){var h=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,h);return a.apply(f,e)}}else return function(){return a.apply(f,arguments)}};goog.bind=function(a,f,e){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,f){var e=Array.prototype.slice.call(arguments,1);return function(){var f=Array.prototype.slice.call(arguments);f.unshift.apply(f,e);return a.apply(this,f)}};goog.mixin=function(a,f){for(var e in f)a[e]=f[e]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null)goog.global.eval("var _et_ = 1;"),typeof goog.global._et_!="undefined"?(delete goog.global._et_,goog.evalWorksForGlobals_=true):goog.evalWorksForGlobals_=false;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var f=goog.global.document,e=f.createElement("script");e.type="text/javascript";e.defer=false;e.appendChild(f.createTextNode(a));f.body.appendChild(e);
f.body.removeChild(e)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,f){var e=function(a){return goog.cssNameMapping_[a]||a},h;h=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?e:function(a){for(var a=a.split("-"),f=[],h=0;h<a.length;h++)f.push(e(a[h]));return f.join("-")}:function(a){return a};return f?a+"-"+h(f):h(a)};goog.setCssNameMapping=function(a,f){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=f};
if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(a,f){var e=f||{},h;for(h in e)var m=(""+e[h]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+h+"\\}","gi"),m);return a};goog.exportSymbol=function(a,f,e){goog.exportPath_(a,f,e)};goog.exportProperty=function(a,f,e){a[f]=e};goog.inherits=function(a,f){function e(){}e.prototype=f.prototype;a.superClass_=f.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,f,e){var h=arguments.callee.caller;if(h.superClass_)return h.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),i=false,p=a.constructor;p;p=p.superClass_&&p.superClass_.constructor)if(p.prototype[f]===h)i=true;else if(i)return p.prototype[f].apply(a,m);if(a[f]===h)return a.constructor.prototype[f].apply(a,m);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var glslunit={ShaderVariable:function(a,f){this.globalVariables_={};this.name_=a;this.isTexture_=!!f;this.attributeLocation_=null}};glslunit.ShaderVariable.QualifierType={UNIFORM:1,ATTRIBUTE:2,VARYING:3};glslunit.ShaderVariable.prototype.getName=function(){if(this.renameMap_){var a=this.renameMap_[this.name_];if(a)return a}return this.name_};glslunit.ShaderVariable.prototype.setGlobalVariables=function(a,f){this.globalVariables_=a;this.renameMap_=f||null};
glslunit.ShaderVariable.prototype.getIsTexture=function(){return this.isTexture_};glslunit.ShaderVariable.prototype.cleanUp=function(a){this.attributeLocation_!=null&&a.disableVertexAttribArray(this.attributeLocation_)};
glslunit.ShaderVariable.prototype.getLocation=function(a,f){var e=this.getQualifierType();this.attributeLocation_=null;return e==glslunit.ShaderVariable.QualifierType.ATTRIBUTE?(e=a.getAttribLocation(f,this.getName()),e>=0?(a.enableVertexAttribArray(e),this.attributeLocation_=e):null):a.getUniformLocation(f,this.getName())};
glslunit.ShaderVariable.prototype.getQualifierType=function(){var a=this.globalVariables_[this.getName()];if(a&&(a=a.typeAttribute.qualifier))return glslunit.ShaderVariable.QualifierType[a.split(" ").slice(-1)[0].toUpperCase()];throw this.getName()+" was not an input variable to the shader program.";};glslunit.ShaderVariable.prototype.getTypeName=function(){return this.globalVariables_[this.getName()].typeAttribute.name};goog.debug={};goog.debug.Error=function(a){this.stack=Error().stack||"";if(a)this.message=String(a)};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(a,f){return a.lastIndexOf(f,0)==0};goog.string.endsWith=function(a,f){var e=a.length-f.length;return e>=0&&a.indexOf(f,e)==e};goog.string.caseInsensitiveStartsWith=function(a,f){return goog.string.caseInsensitiveCompare(f,a.substr(0,f.length))==0};goog.string.caseInsensitiveEndsWith=function(a,f){return goog.string.caseInsensitiveCompare(f,a.substr(a.length-f.length,f.length))==0};
goog.string.subs=function(a,f){for(var e=1;e<arguments.length;e++)var h=String(arguments[e]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,h);return a};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptySafe=function(a){return goog.string.isEmpty(goog.string.makeSafe(a))};goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};
goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return a==" "};goog.string.isUnicodeChar=function(a){return a.length==1&&a>=" "&&a<="~"||a>="\u0080"&&a<="\ufffd"};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};
goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};
goog.string.caseInsensitiveCompare=function(a,f){var e=String(a).toLowerCase(),h=String(f).toLowerCase();return e<h?-1:e==h?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(a,f){if(a==f)return 0;if(!a)return-1;if(!f)return 1;for(var e=a.toLowerCase().match(goog.string.numerateCompareRegExp_),h=f.toLowerCase().match(goog.string.numerateCompareRegExp_),m=Math.min(e.length,h.length),i=0;i<m;i++){var p=e[i],q=h[i];if(p!=q){e=parseInt(p,10);return!isNaN(e)&&(h=parseInt(q,10),!isNaN(h)&&e-h)?e-h:p<q?-1:1}}return e.length!=h.length?e.length-h.length:a<f?-1:1};goog.string.encodeUriRegExp_=/^[a-zA-Z0-9\-_.!~*'()]*$/;
goog.string.urlEncode=function(a){a=String(a);return!goog.string.encodeUriRegExp_.test(a)?encodeURIComponent(a):a};goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,f){return a.replace(/(\r\n|\r|\n)/g,f?"<br />":"<br>")};
goog.string.htmlEscape=function(a,f){if(f)return a.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");else{if(!goog.string.allRe_.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(goog.string.amperRe_,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(goog.string.ltRe_,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(goog.string.gtRe_,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(goog.string.quotRe_,"&quot;"));return a}};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesUsingDom_=function(a){var f={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},e=document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,m){var i=f[a];if(i)return i;if(m.charAt(0)=="#"){var p=Number("0"+m.substr(1));isNaN(p)||(i=String.fromCharCode(p))}if(!i)e.innerHTML=a+" ",i=e.firstChild.nodeValue.slice(0,-1);return f[a]=i})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,e){switch(e){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(e.charAt(0)=="#"){var h=Number("0"+e.substr(1));if(!isNaN(h))return String.fromCharCode(h)}return a}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,f){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),f)};
goog.string.stripQuotes=function(a,f){for(var e=f.length,h=0;h<e;h++){var m=e==1?f:f.charAt(h);if(a.charAt(0)==m&&a.charAt(a.length-1)==m)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,f,e){e&&(a=goog.string.unescapeEntities(a));a.length>f&&(a=a.substring(0,f-3)+"...");e&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,f,e,h){e&&(a=goog.string.unescapeEntities(a));if(h&&a.length>f){h>f&&(h=f);var m=a.length-h,a=a.substring(0,f-h)+"..."+a.substring(m)}else a.length>f&&(h=Math.floor(f/2),m=a.length-h,h+=f%2,a=a.substring(0,h)+"..."+a.substring(m));e&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);if(a.quote)return a.quote();else{for(var f=['"'],e=0;e<a.length;e++){var h=a.charAt(e),m=h.charCodeAt(0);f[e+1]=goog.string.specialEscapeChars_[h]||(m>31&&m<127?h:goog.string.escapeChar(h))}f.push('"');return f.join("")}};goog.string.escapeString=function(a){for(var f=[],e=0;e<a.length;e++)f[e]=goog.string.escapeChar(a.charAt(e));return f.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var f=a,e=a.charCodeAt(0);if(e>31&&e<127)f=a;else{if(e<256){if(f="\\x",e<16||e>256)f+="0"}else f="\\u",e<4096&&(f+="0");f+=e.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=f};goog.string.toMap=function(a){for(var f={},e=0;e<a.length;e++)f[a.charAt(e)]=true;return f};
goog.string.contains=function(a,f){return a.indexOf(f)!=-1};goog.string.countOf=function(a,f){return a&&f?a.split(f).length-1:0};goog.string.removeAt=function(a,f,e){var h=a;f>=0&&f<a.length&&e>0&&(h=a.substr(0,f)+a.substr(f+e,a.length-f-e));return h};goog.string.remove=function(a,f){var e=RegExp(goog.string.regExpEscape(f),"");return a.replace(e,"")};goog.string.removeAll=function(a,f){var e=RegExp(goog.string.regExpEscape(f),"g");return a.replace(e,"")};
goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,f){return Array(f+1).join(a)};goog.string.padNumber=function(a,f,e){a=goog.isDef(e)?a.toFixed(e):String(a);e=a.indexOf(".");if(e==-1)e=a.length;return goog.string.repeat("0",Math.max(0,f-e))+a};goog.string.makeSafe=function(a){return a==null?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^goog.now()).toString(36)};
goog.string.compareVersions=function(a,f){for(var e=0,h=goog.string.trim(String(a)).split("."),m=goog.string.trim(String(f)).split("."),i=Math.max(h.length,m.length),p=0;e==0&&p<i;p++){var q=h[p]||"",o=m[p]||"",y=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var u=y.exec(q)||["","",""],w=t.exec(o)||["","",""];if(u[0].length==0&&w[0].length==0)break;var e=u[1].length==0?0:parseInt(u[1],10),B=w[1].length==0?0:parseInt(w[1],10),e=goog.string.compareElements_(e,B)||goog.string.compareElements_(u[2].length==
0,w[2].length==0)||goog.string.compareElements_(u[2],w[2])}while(e==0)}return e};goog.string.compareElements_=function(a,f){if(a<f)return-1;else if(a>f)return 1;return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){for(var f=0,e=0;e<a.length;++e)f=31*f+a.charCodeAt(e),f%=goog.string.HASHCODE_MAX_;return f};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(a){var f=Number(a);return f==0&&goog.string.isEmpty(a)?NaN:f};goog.string.toCamelCaseCache_={};goog.string.toCamelCase=function(a){return goog.string.toCamelCaseCache_[a]||(goog.string.toCamelCaseCache_[a]=String(a).replace(/\-([a-z])/g,function(a,e){return e.toUpperCase()}))};goog.string.toSelectorCaseCache_={};goog.string.toSelectorCase=function(a){return goog.string.toSelectorCaseCache_[a]||(goog.string.toSelectorCaseCache_[a]=String(a).replace(/([A-Z])/g,"-$1").toLowerCase())};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,f){f.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,f));f.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(a,f,e,h){var m="Assertion failed";if(e){m+=": "+e;var i=h}else a&&(m+=": "+a,i=f);throw new goog.asserts.AssertionError(""+m,i||[]);};
goog.asserts.assert=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,f,Array.prototype.slice.call(arguments,2));return a};goog.asserts.fail=function(a,f){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertString=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertFunction=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertObject=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertArray=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertBoolean=function(a,f,e){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],f,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,f,e,h){goog.asserts.ENABLE_ASSERTS&&!(a instanceof f)&&goog.asserts.doAssertFailure_("instanceof check failed.",null,e,Array.prototype.slice.call(arguments,3))};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=true;goog.array.peek=function(a){return a[a.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,f,e)}:function(a,f,e){e=e==null?0:e<0?Math.max(0,a.length+e):e;if(goog.isString(a))return!goog.isString(f)||f.length!=1?-1:a.indexOf(f,e);for(;e<a.length;e++)if(e in a&&a[e]===f)return e;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,f,e==null?a.length-1:e)}:function(a,f,e){e=e==null?a.length-1:e;e<0&&(e=Math.max(0,a.length+e));if(goog.isString(a))return!goog.isString(f)||f.length!=1?-1:a.lastIndexOf(f,e);for(;e>=0;e--)if(e in a&&a[e]===f)return e;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(a,f,e){goog.asserts.assert(a.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,f,e)}:function(a,f,e){for(var h=a.length,m=goog.isString(a)?a.split(""):a,i=0;i<h;i++)i in m&&f.call(e,m[i],i,a)};goog.array.forEachRight=function(a,f,e){var h=a.length,m=goog.isString(a)?a.split(""):a;for(h-=1;h>=0;--h)h in m&&f.call(e,m[h],h,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,f,e)}:function(a,f,e){for(var h=a.length,m=[],i=0,p=goog.isString(a)?a.split(""):a,q=0;q<h;q++)if(q in p){var o=p[q];f.call(e,o,q,a)&&(m[i++]=o)}return m};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(a,f,e)}:function(a,f,e){for(var h=a.length,m=Array(h),i=goog.isString(a)?a.split(""):a,p=0;p<h;p++)p in i&&(m[p]=f.call(e,i[p],p,a));return m};goog.array.reduce=function(a,f,e,h){if(a.reduce)return h?a.reduce(goog.bind(f,h),e):a.reduce(f,e);var m=e;goog.array.forEach(a,function(e,p){m=f.call(h,m,e,p,a)});return m};
goog.array.reduceRight=function(a,f,e,h){if(a.reduceRight)return h?a.reduceRight(goog.bind(f,h),e):a.reduceRight(f,e);var m=e;goog.array.forEachRight(a,function(e,p){m=f.call(h,m,e,p,a)});return m};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(a,f,e)}:function(a,f,e){for(var h=a.length,m=goog.isString(a)?a.split(""):a,i=0;i<h;i++)if(i in m&&f.call(e,m[i],i,a))return true;return false};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(a,f,e){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(a,f,e)}:function(a,f,e){for(var h=a.length,m=goog.isString(a)?a.split(""):a,i=0;i<h;i++)if(i in m&&!f.call(e,m[i],i,a))return false;return true};goog.array.find=function(a,f,e){f=goog.array.findIndex(a,f,e);return f<0?null:goog.isString(a)?a.charAt(f):a[f]};
goog.array.findIndex=function(a,f,e){for(var h=a.length,m=goog.isString(a)?a.split(""):a,i=0;i<h;i++)if(i in m&&f.call(e,m[i],i,a))return i;return-1};goog.array.findRight=function(a,f,e){f=goog.array.findIndexRight(a,f,e);return f<0?null:goog.isString(a)?a.charAt(f):a[f]};goog.array.findIndexRight=function(a,f,e){var h=a.length,m=goog.isString(a)?a.split(""):a;for(h-=1;h>=0;h--)if(h in m&&f.call(e,m[h],h,a))return h;return-1};goog.array.contains=function(a,f){return goog.array.indexOf(a,f)>=0};
goog.array.isEmpty=function(a){return a.length==0};goog.array.clear=function(a){if(!goog.isArray(a))for(var f=a.length-1;f>=0;f--)delete a[f];a.length=0};goog.array.insert=function(a,f){goog.array.contains(a,f)||a.push(f)};goog.array.insertAt=function(a,f,e){goog.array.splice(a,e,0,f)};goog.array.insertArrayAt=function(a,f,e){goog.partial(goog.array.splice,a,e,0).apply(null,f)};
goog.array.insertBefore=function(a,f,e){var h;arguments.length==2||(h=goog.array.indexOf(a,e))<0?a.push(f):goog.array.insertAt(a,f,h)};goog.array.remove=function(a,f){var e=goog.array.indexOf(a,f),h;(h=e>=0)&&goog.array.removeAt(a,e);return h};goog.array.removeAt=function(a,f){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(a,f,1).length==1};goog.array.removeIf=function(a,f,e){f=goog.array.findIndex(a,f,e);return f>=0?(goog.array.removeAt(a,f),true):false};
goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.clone=function(a){if(goog.isArray(a))return goog.array.concat(a);else{for(var f=[],e=0,h=a.length;e<h;e++)f[e]=a[e];return f}};goog.array.toArray=function(a){return goog.isArray(a)?goog.array.concat(a):goog.array.clone(a)};
goog.array.extend=function(a,f){for(var e=1;e<arguments.length;e++){var h=arguments[e],m;if(goog.isArray(h)||(m=goog.isArrayLike(h))&&h.hasOwnProperty("callee"))a.push.apply(a,h);else if(m)for(var i=a.length,p=h.length,q=0;q<p;q++)a[i+q]=h[q];else a.push(h)}};goog.array.splice=function(a,f,e,h){goog.asserts.assert(a.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};
goog.array.slice=function(a,f,e){goog.asserts.assert(a.length!=null);return arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(a,f):goog.array.ARRAY_PROTOTYPE_.slice.call(a,f,e)};goog.array.removeDuplicates=function(a,f){for(var e=f||a,h={},m=0,i=0;i<a.length;){var p=a[i++],q=goog.isObject(p)?"o"+goog.getUid(p):(typeof p).charAt(0)+p;Object.prototype.hasOwnProperty.call(h,q)||(h[q]=true,e[m++]=p)}e.length=m};
goog.array.binarySearch=function(a,f,e){return goog.array.binarySearch_(a,e||goog.array.defaultCompare,false,f)};goog.array.binarySelect=function(a,f,e){return goog.array.binarySearch_(a,f,true,void 0,e)};goog.array.binarySearch_=function(a,f,e,h,m){for(var i=0,p=a.length,q;i<p;){var o=i+p>>1,y;y=e?f.call(m,a[o],o,a):f(h,a[o]);y>0?i=o+1:(p=o,q=!y)}return q?i:~i};goog.array.sort=function(a,f){goog.asserts.assert(a.length!=null);goog.array.ARRAY_PROTOTYPE_.sort.call(a,f||goog.array.defaultCompare)};
goog.array.stableSort=function(a,f){for(var e=0;e<a.length;e++)a[e]={index:e,value:a[e]};var h=f||goog.array.defaultCompare;goog.array.sort(a,function(a,f){return h(a.value,f.value)||a.index-f.index});for(e=0;e<a.length;e++)a[e]=a[e].value};goog.array.sortObjectsByKey=function(a,f,e){var h=e||goog.array.defaultCompare;goog.array.sort(a,function(a,e){return h(a[f],e[f])})};
goog.array.isSorted=function(a,f,e){for(var f=f||goog.array.defaultCompare,h=1;h<a.length;h++){var m=f(a[h-1],a[h]);if(m>0||m==0&&e)return false}return true};goog.array.equals=function(a,f,e){if(!goog.isArrayLike(a)||!goog.isArrayLike(f)||a.length!=f.length)return false;for(var h=a.length,e=e||goog.array.defaultCompareEquality,m=0;m<h;m++)if(!e(a[m],f[m]))return false;return true};goog.array.compare=function(a,f,e){return goog.array.equals(a,f,e)};
goog.array.compare3=function(a,f,e){for(var e=e||goog.array.defaultCompare,h=Math.min(a.length,f.length),m=0;m<h;m++){var i=e(a[m],f[m]);if(i!=0)return i}return goog.array.defaultCompare(a.length,f.length)};goog.array.defaultCompare=function(a,f){return a>f?1:a<f?-1:0};goog.array.defaultCompareEquality=function(a,f){return a===f};goog.array.binaryInsert=function(a,f,e){e=goog.array.binarySearch(a,f,e);return e<0?(goog.array.insertAt(a,f,-(e+1)),true):false};
goog.array.binaryRemove=function(a,f,e){f=goog.array.binarySearch(a,f,e);return f>=0?goog.array.removeAt(a,f):false};goog.array.bucket=function(a,f){for(var e={},h=0;h<a.length;h++){var m=a[h],i=f(m,h,a);goog.isDef(i)&&(e[i]||(e[i]=[])).push(m)}return e};goog.array.repeat=function(a,f){for(var e=[],h=0;h<f;h++)e[h]=a;return e};goog.array.flatten=function(a){for(var f=[],e=0;e<arguments.length;e++){var h=arguments[e];goog.isArray(h)?f.push.apply(f,goog.array.flatten.apply(null,h)):f.push(h)}return f};
goog.array.rotate=function(a,f){goog.asserts.assert(a.length!=null);a.length&&(f%=a.length,f>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-f,f)):f<0&&goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-f)));return a};goog.array.zip=function(a){if(!arguments.length)return[];for(var f=[],e=0;;e++){for(var h=[],m=0;m<arguments.length;m++){var i=arguments[m];if(e>=i.length)return f;h.push(i[e])}f.push(h)}};
goog.array.shuffle=function(a,f){for(var e=f||Math.random,h=a.length-1;h>0;h--){var m=Math.floor(e()*(h+1)),i=a[h];a[h]=a[m];a[m]=i}};glslunit.NumberShaderVariable=function(a,f){glslunit.ShaderVariable.call(this,a);this.values_=f;this.buffer_=this.bufferType_=null;this.bufferValueSize_=0};goog.inherits(glslunit.NumberShaderVariable,glslunit.ShaderVariable);glslunit.NumberShaderVariable.prototype.setBufferType=function(a){this.bufferType_=a};
glslunit.NumberShaderVariable.decomposeType_=function(a){var f=false,e;a=="float"?(e="f",a="1"):a=="int"||a=="bool"?(e="i",a="1"):(a.slice(0,3)=="mat"?(f=true,e="f"):a[0]=="i"||a[0]=="b"?(e="i",a=a.slice(1)):e="f",a=a.slice(3));return{glslType:e,size:a,isMatrix:f}};glslunit.NumberShaderVariable.prototype.getBufferType_=function(a){return this.bufferType_?this.bufferType_:a=="i"?Int32Array:Float32Array};
glslunit.NumberShaderVariable.prototype.bufferData=function(a,f,e){var h=this.getTypeName();if(h=="sampler2D")throw"Error while buffering "+this.getName()+": Expected a texture but got a numeric variable";var m=glslunit.NumberShaderVariable.decomposeType_(h),i=m.size;m.isMatrix&&(i*=i);if(this.values_.length!=i)throw"Error while buffering "+this.getName()+": Expected a variable of length "+i+" for a "+h+", but got a variable of length "+this.values_.length;h=this.getQualifierType();i=goog.array.clone(this.values_);
if(h==glslunit.ShaderVariable.QualifierType.ATTRIBUTE)for(var p=0;p<e-1;p++)[].push.apply(i,this.values_);e=new (this.getBufferType_(m.glslType))(i);h==glslunit.ShaderVariable.QualifierType.UNIFORM?(h="uniform"+(m.isMatrix?"Matrix":"")+m.size+m.glslType+"v",m.isMatrix?a[h].apply(a,[this.getLocation(a,f),false,e]):a[h].apply(a,[this.getLocation(a,f),e])):h==glslunit.ShaderVariable.QualifierType.ATTRIBUTE&&this.bufferAttribute(a,f,parseInt(m.size,10),e)};
glslunit.NumberShaderVariable.prototype.bufferAttribute=function(a,f,e,h){this.buffer_=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer_);a.bufferData(a.ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,null);this.bufferValueSize_=e};
glslunit.NumberShaderVariable.prototype.bindData=function(a,f){if(this.buffer_&&this.bufferValueSize_){var e=this.getLocation(a,f);a.bindBuffer(a.ARRAY_BUFFER,this.buffer_);a.vertexAttribPointer(Number(e),this.bufferValueSize_,a.FLOAT,false,0,0);a.bindBuffer(a.ARRAY_BUFFER,null)}};glslunit.NumberShaderVariable.prototype.cleanUp=function(a){glslunit.NumberShaderVariable.superClass_.cleanUp.call(this,a);this.buffer_&&a.deleteBuffer(this.buffer_)};glslunit.testing={};glslunit.testing.InputValue=function(){};glslunit.testing.InputValue.prototype.getShaderVariable=function(){};goog.object={};goog.object.forEach=function(a,f,e){for(var h in a)f.call(e,a[h],h,a)};goog.object.filter=function(a,f,e){var h={},m;for(m in a)f.call(e,a[m],m,a)&&(h[m]=a[m]);return h};goog.object.map=function(a,f,e){var h={},m;for(m in a)h[m]=f.call(e,a[m],m,a);return h};goog.object.some=function(a,f,e){for(var h in a)if(f.call(e,a[h],h,a))return true;return false};goog.object.every=function(a,f,e){for(var h in a)if(!f.call(e,a[h],h,a))return false;return true};
goog.object.getCount=function(a){var f=0,e;for(e in a)f++;return f};goog.object.getAnyKey=function(a){for(var f in a)return f};goog.object.getAnyValue=function(a){for(var f in a)return a[f]};goog.object.contains=function(a,f){return goog.object.containsValue(a,f)};goog.object.getValues=function(a){var f=[],e=0,h;for(h in a)f[e++]=a[h];return f};goog.object.getKeys=function(a){var f=[],e=0,h;for(h in a)f[e++]=h;return f};
goog.object.getValueByKeys=function(a,f){for(var e=goog.isArrayLike(f),h=e?f:arguments,e=e?0:1;e<h.length;e++)if(a=a[h[e]],!goog.isDef(a))break;return a};goog.object.containsKey=function(a,f){return f in a};goog.object.containsValue=function(a,f){for(var e in a)if(a[e]==f)return true;return false};goog.object.findKey=function(a,f,e){for(var h in a)if(f.call(e,a[h],h,a))return h};goog.object.findValue=function(a,f,e){return(f=goog.object.findKey(a,f,e))&&a[f]};
goog.object.isEmpty=function(a){for(var f in a)return false;return true};goog.object.clear=function(a){for(var f in a)delete a[f]};goog.object.remove=function(a,f){var e;(e=f in a)&&delete a[f];return e};goog.object.add=function(a,f,e){if(f in a)throw Error('The object already contains the key "'+f+'"');goog.object.set(a,f,e)};goog.object.get=function(a,f,e){return f in a?a[f]:e};goog.object.set=function(a,f,e){a[f]=e};goog.object.setIfUndefined=function(a,f,e){return f in a?a[f]:a[f]=e};
goog.object.clone=function(a){var f={},e;for(e in a)f[e]=a[e];return f};goog.object.unsafeClone=function(a){var f=goog.typeOf(a);if(f=="object"||f=="array"){if(a.clone)return a.clone();var f=f=="array"?[]:{},e;for(e in a)f[e]=goog.object.unsafeClone(a[e]);return f}return a};goog.object.transpose=function(a){var f={},e;for(e in a)f[a[e]]=e;return f};goog.object.PROTOTYPE_FIELDS_="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
goog.object.extend=function(a,f){for(var e,h,m=1;m<arguments.length;m++){h=arguments[m];for(e in h)a[e]=h[e];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)e=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(h,e)&&(a[e]=h[e])}};
goog.object.create=function(a){var f=arguments.length;if(f==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(f%2)throw Error("Uneven number of arguments");for(var e={},h=0;h<f;h+=2)e[arguments[h]]=arguments[h+1];return e};goog.object.createSet=function(a){var f=arguments.length;if(f==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var e={},h=0;h<f;h++)e[arguments[h]]=true;return e};glslunit.utils={};glslunit.utils.getFunctionSuffix=function(a){return glslunit.utils.toTitleOrCamelCase(a,true)};glslunit.utils.toTitleOrCamelCase=function(a,f){var e=a.split("_").map(function(a){return a.slice(0,1).toUpperCase()+a.slice(1).toLowerCase()}).join("");f||(e=e.slice(0,1).toLowerCase()+e.slice(1));return e};glslunit.ASTVisitor=function(){};glslunit.ASTVisitor.prototype.getBeforeVisitFunction=function(a){return this["beforeVisit"+glslunit.utils.getFunctionSuffix(a.type)]};glslunit.ASTVisitor.prototype.getAfterVisitFunction=function(a){return this["afterVisit"+glslunit.utils.getFunctionSuffix(a.type)]};glslunit.ASTVisitor.prototype.getVisitFunction=function(a){return this["visit"+glslunit.utils.getFunctionSuffix(a.type)]};
glslunit.ASTVisitor.prototype.visitNode=function(a){if(a&&a.type){var f=this.getBeforeVisitFunction(a);f&&f.apply(this,[a]);(f=this.getVisitFunction(a))?f.apply(this,[a]):this.genericVisitor(a);(f=this.getAfterVisitFunction(a))&&f.apply(this,[a])}};glslunit.ASTVisitor.prototype.visitList=function(a){goog.array.forEach(a,function(a){this.visitNode(a)},this)};
glslunit.ASTVisitor.prototype.genericVisitor=function(a){for(var f in a){var e=a[f];goog.isArray(e)?this.visitList(e):goog.isObject(e)&&e.type&&this.visitNode(e)}};glslunit.ASTTransformer=function(){this.mixed_in_visitors_=[]};glslunit.ASTTransformer.nextId_=-1;glslunit.ASTTransformer.getNextId=function(){return glslunit.ASTTransformer.nextId_--};glslunit.ASTTransformer.cloneNode=function(a){a=goog.object.clone(a);a.id=glslunit.ASTTransformer.getNextId();return a};glslunit.ASTTransformer.prototype.mixinVisitor=function(a){this.mixed_in_visitors_.push(a)};glslunit.ASTTransformer.prototype.getTransformFunction=function(a){return this["transform"+glslunit.utils.getFunctionSuffix(a.type)]};
glslunit.ASTTransformer.prototype.mixinVisitFunctions_=function(a,f,e){var h=this[f+glslunit.utils.getFunctionSuffix(a.type)];return goog.bind(function(a){goog.array.forEach(this.mixed_in_visitors_,function(f){var h=e(f).apply(f,[a]);h&&h.apply(f,[a])});h&&h.apply(this,[a])},this)};glslunit.ASTTransformer.prototype.getBeforeTransformFunction=function(a){return this.mixinVisitFunctions_(a,"beforeTransform",function(a){return a.getBeforeVisitFunction})};
glslunit.ASTTransformer.prototype.getAfterTransformFunction=function(a){return this.mixinVisitFunctions_(a,"afterTransform",function(a){return a.getAfterVisitFunction})};
glslunit.ASTTransformer.prototype.transformNode=function(a){var f=false,e=this.getBeforeTransformFunction(a);e&&e.apply(this,[a]);var e=glslunit.ASTTransformer.cloneNode(a),h;for(h in a){var m=a[h];if(goog.isArray(m)){e[h]=[];for(var i=0;i<m.length;i++){var p=m[i],q=this.transformNode(p);q!=p&&(f=true);q!=null&&Array.prototype.push.apply(e[h],goog.isArray(q)?q:[q])}}else m.type&&(q=this.transformNode(m),q!=m&&(f=true,q!=null?e[h]=q:delete e[h]))}h=this.getTransformFunction(a);e=f?e:a;h&&(e=h.apply(this,
[e,a]));(f=this.getAfterTransformFunction(a))&&f.apply(this,[a,e]);return e};glslunit.FunctionRenameTransformer=function(a,f){glslunit.ASTTransformer.call(this);this.targetPrototype_=a;this.newName_=f};goog.inherits(glslunit.FunctionRenameTransformer,glslunit.ASTTransformer);glslunit.FunctionRenameTransformer.functionPrototypeEquals=function(a,f){return goog.array.equals(a.parameters,f.parameters,function(a,f){return a.type_name==f.type_name})&&a.name==f.name&&a.returnType.name==f.returnType.name?true:false};
glslunit.FunctionRenameTransformer.prototype.transformFunctionDeclaration=function(a){var f=a;if(glslunit.FunctionRenameTransformer.functionPrototypeEquals(a,this.targetPrototype_))f=glslunit.ASTTransformer.cloneNode(a),f.name=this.newName_;return f};glslunit.FunctionRenameTransformer.prototype.transformFunctionPrototype=glslunit.FunctionRenameTransformer.prototype.transformFunctionDeclaration;
glslunit.FunctionRenameTransformer.prototype.transformFunctionCall=function(a){var f=a;if(a.function_name==this.targetPrototype_.name&&a.parameters.length==this.targetPrototype_.parameters.length)f=glslunit.ASTTransformer.cloneNode(a),f.function_name=this.newName_;return f};glslunit.Generator=function(a,f){glslunit.ASTVisitor.call(this);this.newline_str_=a||"\n";this.debug_=!!f;this.sourceCode_="";this.currentIndent_=0};goog.inherits(glslunit.Generator,glslunit.ASTVisitor);glslunit.Generator.INDENT_STR_="  ";glslunit.Generator.OrderOfOperations={function_call:0,identifier:0,"float":0,"int":0,bool:0,postfix:1,unary:2,"*":3,"/":3,"%":3,"+":4,"-":4,"<<":5,">>":5,"<":6,">":6,"<=":6,">=":6,"==":7,"!=":7,"&":8,"^":9,"|":10,"&&":11,"||":12,ternary:13};
glslunit.Generator.getNodePrecedence=function(a){return a.type=="binary"?glslunit.Generator.OrderOfOperations[a.operator.operator]:glslunit.Generator.OrderOfOperations[a.type]};glslunit.Generator.getSourceCode=function(a,f,e){f=new glslunit.Generator(f,e);f.visitNode(a);return f.sourceCode_};glslunit.Generator.prototype.checkAndAdd=function(a,f,e){return f?a+f+e:""};glslunit.Generator.prototype.addNodesWithJoin_=function(a,f){for(var e=0;e<a.length;e++)e!=0&&(this.sourceCode_+=f),this.visitNode(a[e])};
glslunit.Generator.prototype.maybePrintNewline=function(){this.debug_&&(this.sourceCode_+=this.newline_str_+Array(this.currentIndent_+1).join(glslunit.Generator.INDENT_STR_))};glslunit.Generator.prototype.maybeUnindent=function(){if(this.debug_&&this.sourceCode_.slice(-1*glslunit.Generator.INDENT_STR_.length)==glslunit.Generator.INDENT_STR_)this.sourceCode_=this.sourceCode_.slice(0,-1*glslunit.Generator.INDENT_STR_.length)};
glslunit.Generator.prototype.visitStructDefinition=function(a){this.sourceCode_+=this.checkAndAdd("",a.qualifier," ");this.sourceCode_+="struct";this.sourceCode_+=this.checkAndAdd(" ",a.name,"");this.sourceCode_+="{";this.currentIndent_++;this.addNodesWithJoin_(a.members,"");this.currentIndent_--;this.maybeUnindent();this.sourceCode_+="}";a.declarators&&this.addNodesWithJoin_(a.declarators,",");this.sourceCode_+=";";this.maybePrintNewline()};
glslunit.Generator.prototype.visitScope=function(a){this.sourceCode_+="{";this.currentIndent_++;this.maybePrintNewline();this.addNodesWithJoin_(a.statements,"");this.currentIndent_--;this.maybeUnindent();this.sourceCode_+="}";this.maybePrintNewline()};glslunit.Generator.prototype.visitPrecision=function(a){this.sourceCode_+="precision "+a.precision+" "+a.typeName+";";this.maybePrintNewline()};
glslunit.Generator.prototype.visitInvariant=function(a){this.sourceCode_+="invariant ";this.addNodesWithJoin_(a.identifiers,",");this.sourceCode_+=";";this.maybePrintNewline()};
glslunit.Generator.prototype.visitParameter=function(a){this.sourceCode_+=this.checkAndAdd("",a.typeQualifier," ");this.sourceCode_+=this.checkAndAdd("",a.parameterQualifier," ");this.sourceCode_+=this.checkAndAdd("",a.precision," ");this.sourceCode_+=a.type_name+" "+a.name;a.arraySize&&(this.sourceCode_+="[",this.visitNode(a.arraySize),this.sourceCode_+="]")};
glslunit.Generator.prototype.generateFunctionPrototype_=function(a){this.visitNode(a.returnType);this.sourceCode_+=" "+a.name+"(";this.addNodesWithJoin_(a.parameters,",");this.sourceCode_+=")"};glslunit.Generator.prototype.visitFunctionPrototype=function(a){this.generateFunctionPrototype_(a);this.sourceCode_+=";";this.maybePrintNewline()};glslunit.Generator.prototype.visitFunctionDeclaration=function(a){this.generateFunctionPrototype_(a);this.visitNode(a.body)};
glslunit.Generator.prototype.visitPreprocessor=function(a){var f=this.sourceCode_.slice(-1*this.newline_str_.length);f&&f!=this.newline_str_&&(this.sourceCode_+=this.newline_str_);this.sourceCode_+=a.directive;this.sourceCode_+=this.checkAndAdd(" ",a.value,"");this.sourceCode_+=this.newline_str_;a.guarded_statements&&(this.addNodesWithJoin_(a.guarded_statements,""),a.elseBody&&this.visitNode(a.elseBody),a.directive.slice(0,3)=="#if"&&(f=this.sourceCode_.slice(-1*this.newline_str_.length),f!=this.newline_str_&&
(this.sourceCode_+=this.newline_str_),this.sourceCode_+="#endif"+this.newline_str_))};glslunit.Generator.prototype.generateWhile_=function(a){this.sourceCode_+="while(";this.visitNode(a.condition);this.sourceCode_+=")"};glslunit.Generator.prototype.visitDoStatement=function(a){this.sourceCode_+="do ";this.visitNode(a.body);this.generateWhile_(a)};glslunit.Generator.prototype.visitWhileStatement=function(a){this.generateWhile_(a);this.visitNode(a.body)};
glslunit.Generator.prototype.visitForStatement=function(a){this.sourceCode_+="for(";this.visitNode(a.initializer);this.visitNode(a.condition);this.sourceCode_+=";";this.visitNode(a.increment);this.sourceCode_+=")";this.visitNode(a.body)};glslunit.Generator.prototype.visitIfStatement=function(a){this.sourceCode_+="if(";this.visitNode(a.condition);this.sourceCode_+=")";this.visitNode(a.body);a.elseBody&&(this.sourceCode_+="else ",this.visitNode(a.elseBody))};
glslunit.Generator.prototype.visitDeclaratorItem=function(a){this.visitNode(a.name);a.isArray&&(this.sourceCode_+="[",a.arraySize&&this.visitNode(a.arraySize),this.sourceCode_+="]");a.initializer&&(this.sourceCode_+="=",this.visitNode(a.initializer))};glslunit.Generator.prototype.visitDeclarator=function(a){this.visitNode(a.typeAttribute);this.sourceCode_+=" ";this.addNodesWithJoin_(a.declarators,",");this.sourceCode_+=";";this.maybePrintNewline()};
glslunit.Generator.prototype.visitType=function(a){this.sourceCode_+=this.checkAndAdd("",a.qualifier," ");this.sourceCode_+=this.checkAndAdd("",a.precision," ");this.sourceCode_+=a.name};glslunit.Generator.prototype.visitExpression=function(a){this.visitNode(a.expression);this.sourceCode_+=";";this.maybePrintNewline()};glslunit.Generator.prototype.visitJump=function(a){this.sourceCode_+=a.type;a.value&&(this.sourceCode_+=" ",this.visitNode(a.value));this.sourceCode_+=";";this.maybePrintNewline()};
glslunit.Generator.prototype.visitReturn=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitBreak=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitDiscard=glslunit.Generator.prototype.visitJump;glslunit.Generator.prototype.visitContinue=glslunit.Generator.prototype.visitJump;
glslunit.Generator.prototype.visitUnary=function(a){var f=glslunit.Generator.getNodePrecedence(a);this.sourceCode_.slice(-1)==a.operator.operator&&(this.sourceCode_+=" ");this.visitNode(a.operator);this.maybeParenthiseNode_(a.expression,f)};glslunit.Generator.prototype.visitPostfix=function(a){var f=glslunit.Generator.getNodePrecedence(a);this.maybeParenthiseNode_(a.expression,f);this.visitNode(a.operator)};glslunit.Generator.prototype.visitOperator=function(a){this.sourceCode_+=a.operator};
glslunit.Generator.prototype.visitFieldSelector=function(a){this.sourceCode_+="."+a.selection};glslunit.Generator.prototype.visitAccessor=function(a){this.sourceCode_+="[";this.visitNode(a.index);this.sourceCode_+="]"};glslunit.Generator.prototype.visitFunctionCall=function(a){this.sourceCode_+=a.function_name+"(";this.addNodesWithJoin_(a.parameters,",");this.sourceCode_+=")"};glslunit.Generator.prototype.visitIdentifier=function(a){this.sourceCode_+=a.name};
glslunit.Generator.formatFloat=function(a){if(a==0)return"0.";a=(""+a).toLowerCase().replace("+","");a.indexOf(".")==-1&&a.indexOf("e")==-1&&(a+=".");return a.replace(/^0*|0*$/g,"")};glslunit.Generator.prototype.visitFloat=function(a){this.sourceCode_+=glslunit.Generator.formatFloat(a.value)};glslunit.Generator.prototype.visitValue=function(a){this.sourceCode_+=a.value};glslunit.Generator.prototype.visitInt=glslunit.Generator.prototype.visitValue;glslunit.Generator.prototype.visitBool=glslunit.Generator.prototype.visitValue;
glslunit.Generator.prototype.visitBinary=function(a){var f=glslunit.Generator.getNodePrecedence(a);this.maybeParenthiseNode_(a.left,f);this.visitNode(a.operator);this.maybeParenthiseNode_(a.right,f)};glslunit.Generator.prototype.visitTernary=function(a){var f=glslunit.Generator.getNodePrecedence(a);this.maybeParenthiseNode_(a.condition,f);this.sourceCode_+="?";this.maybeParenthiseNode_(a.is_true,f);this.sourceCode_+=":";this.maybeParenthiseNode_(a.is_false,f)};
glslunit.Generator.prototype.maybeParenthiseNode_=function(a,f){var e=glslunit.Generator.getNodePrecedence(a);e>f&&(this.sourceCode_+="(");this.visitNode(a);e>f&&(this.sourceCode_+=")")};glslunit.glsl={};
glslunit.glsl.parser=function(){var a={parse:function(a,e){function h(a){var b=a.charCodeAt(0);if(b<=255)var a="x",d=2;else a="u",d=4;var a="\\"+a,f=b.toString(16).toUpperCase(),b=f;d-=f.length;for(f=0;f<d;f++)b="0"+b;return a+b}function m(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,h)+'"'}function i(a){b<H||(b>H&&(H=b,la=[]),la.push(a))}function p(){var e="newLine@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b).match(/^[\n]/)!==
null?(c=a.charAt(b),b++):(c=null,j&&i("[\\n]"));c=c!==null?"\n":null;n[e]={nextPos:b,result:c};return c}function q(){var e="EOF@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=j;j=false;if(a.length>b){var l=a.charAt(b);b++}else l=null,j&&i("any character");j=d;l===null?d="":(d=null,b=c);n[e]={nextPos:b,result:d};return d}function o(){var e="_@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=p();d===null&&(a.substr(b).match(/^[\r\t\u000c\u000b ]/)!==null?(d=a.charAt(b),b++):(d=null,
j&&i("[\\r\t\u000c\u000b ]")),d===null&&(d=y(),d=d!==null?d:null));if(d!==null)for(var l=[];d!==null;)l.push(d),d=p(),d===null&&(a.substr(b).match(/^[\r\t\u000c\u000b ]/)!==null?(d=a.charAt(b),b++):(d=null,j&&i("[\\r\t\u000c\u000b ]")),d===null&&(d=y(),d=d!==null?d:null));else l=null;(j=c)&&l===null&&i("whitespace");n[e]={nextPos:b,result:l};return l}function y(){var e="comment@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=b;if(a.substr(b,2)==="/*"){var l="/*";b+=2}else l=null,j&&
i('"/*"');if(l!==null){var k=[],g=b,h=b,m=j;j=false;if(a.substr(b,2)==="*/"){var s="*/";b+=2}else s=null,j&&i('"*/"');j=m;s===null?m="":(m=null,b=h);m!==null?(a.length>b?(h=a.charAt(b),b++):(h=null,j&&i("any character")),h!==null?h=[m,h]:(h=null,b=g)):(h=null,b=g);for(;h!==null;)k.push(h),h=g=b,m=j,j=false,a.substr(b,2)==="*/"?(s="*/",b+=2):(s=null,j&&i('"*/"')),j=m,s===null?m="":(m=null,b=h),m!==null?(a.length>b?(h=a.charAt(b),b++):(h=null,j&&i("any character")),h!==null?h=[m,h]:(h=null,b=g)):(h=
null,b=g);k!==null?(a.substr(b,2)==="*/"?(g="*/",b+=2):(g=null,j&&i('"*/"')),g!==null?l=[l,k,g]:(l=null,b=d)):(l=null,b=d)}else l=null,b=d;if(l!==null)d=l;else{d=b;a.substr(b,2)==="//"?(l="//",b+=2):(l=null,j&&i('"//"'));if(l!==null){k=[];a.substr(b).match(/^[^\n]/)!==null?(g=a.charAt(b),b++):(g=null,j&&i("[^\\n]"));for(;g!==null;)k.push(g),a.substr(b).match(/^[^\n]/)!==null?(g=a.charAt(b),b++):(g=null,j&&i("[^\\n]"));k!==null?(g=p(),g===null&&(g=q(),g=g!==null?g:null),g!==null?l=[l,k,g]:(l=null,
b=d)):(l=null,b=d)}else l=null,b=d;d=l!==null?l:null}(j=c)&&d===null&&i("comment");n[e]={nextPos:b,result:d};return d}function t(){var e="semicolon@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)===";"){var l=";";b+=1}else l=null,j&&i('";"');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function u(){var e="comma@"+b,c=n[e];if(c)return b=c.nextPos,c.result;
var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)===","){var l=",";b+=1}else l=null,j&&i('","');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function w(){var e="left_bracket@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)==="["){var l="[";b+=1}else l=null,j&&i('"["');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=
null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function B(){var e="right_bracket@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)==="]"){var l="]";b+=1}else l=null,j&&i('"]"');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function Ra(){var e="equals@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,
1)==="="){var l="=";b+=1}else l=null,j&&i('"="');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function C(){var e="left_paren@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)==="("){var l="(";b+=1}else l=null,j&&i('"("');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}
function D(){var e="right_paren@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)===")"){var l=")";b+=1}else l=null,j&&i('")"');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function ma(){var e="left_brace@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)==="{"){var l="{";b+=1}else l=null,j&&i('"{"');
if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function na(){var e="right_brace@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){if(a.substr(b,1)==="}"){var l="}";b+=1}else l=null,j&&i('"}"');if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function E(){var a="external_statement_list@"+
b,c=n[a];if(c)return b=c.nextPos,c.result;for(var c=[],d=oa();d!==null;)c.push(d),d=oa();if(c!==null){for(var d=new r({type:"root",statements:[]}),f=0;f<c.length;f++)if(c[f])d.statements=d.statements.concat(c[f]);c=d}else c=null;n[a]={nextPos:b,result:c};return c}function oa(){var a="external_statement@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=Sa();c===null&&(c=Ta(),c=c!==null?c:null);c=c!==null?c:null;c===null&&(c=o()!==null?"":null,c=c!==null?c:null);n[a]={nextPos:b,result:c};return c}function Ta(){var a=
"external_declaration@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=Ua();c===null&&(c=Va(),c===null&&(c=pa(),c===null&&(c=Wa(),c=c!==null?c:null)));n[a]={nextPos:b,result:c};return c}function pa(){var e="preprocessor_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="#"){var d="#";b+=1}else d=null,j&&i('"#"');if(d!==null){if(a.substr(b,6)==="define"){var l="define";b+=6}else l=null,j&&i('"define"');l===null&&(a.substr(b,5)==="undef"?(l="undef",b+=5):(l=null,j&&i('"undef"')),
l===null&&(a.substr(b,6)==="pragma"?(l="pragma",b+=6):(l=null,j&&i('"pragma"')),l===null&&(a.substr(b,7)==="version"?(l="version",b+=7):(l=null,j&&i('"version"')),l===null&&(a.substr(b,5)==="error"?(l="error",b+=5):(l=null,j&&i('"error"')),l===null&&(a.substr(b,9)==="extension"?(l="extension",b+=9):(l=null,j&&i('"extension"')),l===null&&(a.substr(b,4)==="line"?(l="line",b+=4):(l=null,j&&i('"line"')),l=l!==null?l:null))))));if(l!==null){var k=o();if(k!==null){var g=[];if(a.substr(b).match(/^[^\n]/)!==
null){var h=a.charAt(b);b++}else h=null,j&&i("[^\\n]");for(;h!==null;)g.push(h),a.substr(b).match(/^[^\n]/)!==null?(h=a.charAt(b),b++):(h=null,j&&i("[^\\n]"));g=g!==null?g.join(""):null;g!==null?(h=p(),h===null&&(h=q(),h=h!==null?h:null),h!==null?d=[d,l,k,g,h]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"preprocessor",directive:"#"+d[1],value:d[3]}):null;n[e]={nextPos:b,result:c};return c}function qa(){var e="preprocessor_if@"+b,c=n[e];if(c)return b=
c.nextPos,c.result;c=b;if(a.substr(b,1)==="#"){var d="#";b+=1}else d=null,j&&i('"#"');if(d!==null){if(a.substr(b,5)==="ifdef"){var l="ifdef";b+=5}else l=null,j&&i('"ifdef"');l===null&&(a.substr(b,6)==="ifndef"?(l="ifndef",b+=6):(l=null,j&&i('"ifndef"')),l===null&&(a.substr(b,2)==="if"?(l="if",b+=2):(l=null,j&&i('"if"')),l=l!==null?l:null));if(l!==null){var k=o();if(k!==null){var g=[];if(a.substr(b).match(/^[^\n]/)!==null){var h=a.charAt(b);b++}else h=null,j&&i("[^\\n]");for(;h!==null;)g.push(h),a.substr(b).match(/^[^\n]/)!==
null?(h=a.charAt(b),b++):(h=null,j&&i("[^\\n]"));g=g!==null?g.join(""):null;g!==null?(h=p(),h===null&&(h=q(),h=h!==null?h:null),h!==null?d=[d,l,k,g,h]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"preprocessor",directive:"#"+d[1],value:d[3]}):null;n[e]={nextPos:b,result:c};return c}function I(){var e="preprocessor_else_if@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,5)==="#elif"){var d="#elif";b+=5}else d=null,j&&i('"#elif"');if(d!==
null){var l=o();if(l!==null){var k=[];if(a.substr(b).match(/^[^\n]/)!==null){var g=a.charAt(b);b++}else g=null,j&&i("[^\\n]");for(;g!==null;)k.push(g),a.substr(b).match(/^[^\n]/)!==null?(g=a.charAt(b),b++):(g=null,j&&i("[^\\n]"));k=k!==null?k.join(""):null;k!==null?(g=p(),g===null&&(g=q(),g=g!==null?g:null),g!==null?d=[d,l,k,g]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"preprocessor",directive:"#elif",value:d[2]}):null;n[e]={nextPos:b,result:c};return c}function ra(){var e=
"preprocessor_else@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,5)==="#else"){var d="#else";b+=5}else d=null,j&&i('"#else"');if(d!==null){var l=p();l!==null?d=[d,l]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"preprocessor",directive:"#else"}):null;n[e]={nextPos:b,result:c};return c}function sa(){var e="preprocessor_end@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,6)==="#endif"){var d="#endif";b+=6}else d=null,j&&i('"#endif"');if(d!==null){var l=p();l===null&&
(l=q(),l=l!==null?l:null);if(l!==null){var k=o(),k=k!==null?k:"";k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;n[e]={nextPos:b,result:d};return d}function Sa(){var a="preprocessor_external_branch@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var d=c=b,f=qa();if(f!==null){var k=E();k!==null?f=[f,k]:(f=null,b=d)}else f=null,b=d;if(f!==null){var d=[],k=b,g=I();if(g!==null){var e=E();e!==null?g=[g,e]:(g=null,b=k)}else g=null,b=k;for(;g!==null;)d.push(g),k=b,g=I(),g!==null?(e=E(),e!==null?
g=[g,e]:(g=null,b=k)):(g=null,b=k);d!==null?(k=b,g=ra(),g!==null?(e=E(),e!==null?g=[g,e]:(g=null,b=k)):(g=null,b=k),k=g!==null?g:"",k!==null?(g=sa(),g!==null?f=[f,d,k,g]:(f=null,b=c)):(f=null,b=c)):(f=null,b=c)}else f=null,b=c;c=f!==null?Xa(f[0],f[1],f[2]):null;n[a]={nextPos:b,result:c};return c}function ta(){var a="preprocessor_statement_branch@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var d=c=b,f=qa();if(f!==null){var e=F();e!==null?f=[f,e]:(f=null,b=d)}else f=null,b=d;if(f!==null){var d=[],e=
b,g=I();if(g!==null){var h=F();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;for(;g!==null;)d.push(g),e=b,g=I(),g!==null?(h=F(),h!==null?g=[g,h]:(g=null,b=e)):(g=null,b=e);d!==null?(e=b,g=ra(),g!==null?(h=F(),h!==null?g=[g,h]:(g=null,b=e)):(g=null,b=e),e=g!==null?g:"",e!==null?(g=sa(),g!==null?f=[f,d,e,g]:(f=null,b=c)):(f=null,b=c)):(f=null,b=c)}else f=null,b=c;c=f!==null?Xa(f[0],f[1],f[2]):null;n[a]={nextPos:b,result:c};return c}function Ua(){var g;var a="function_definition@"+b,c=n[a];if(c)return b=
c.nextPos,c.result;var c=b,d=ua();if(d!==null){var f=T();f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;d!==null?(c=d[0],g=v=new r({type:"function_declaration",name:c.name,returnType:c.returnType,parameters:c.parameters,body:d[1]}),c=g):c=null;n[a]={nextPos:b,result:c};return c}function T(){var a="compound_statement@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ma();if(d!==null){var f=F(),f=f!==null?f:"";if(f!==null){var e=na();e!==null?d=[d,f,e]:(d=null,b=c)}else d=null,b=c}else d=null,b=
c;if(d!==null){c=d[1];v=new r({type:"scope",statements:[]});if(c&&c.statements)v.statements=c.statements;c=v}else c=null;n[a]={nextPos:b,result:c};return c}function F(){var a="statement_list@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=o(),d=d!==null?d:"";if(d!==null){for(var f=[],e=J();e!==null;)f.push(e),e=J();f!==null?(e=o(),e=e!==null?e:"",e!==null?d=[d,f,e]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c;c=d!==null?{statements:d[1]}:null;n[a]={nextPos:b,result:c};return c}function J(){var a=
"statement_no_new_scope@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=T();c===null&&(c=va(),c===null&&(c=ta(),c=c!==null?c:null));n[a]={nextPos:b,result:c};return c}function U(){var a="statement_with_scope@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=T();c===null&&(c=va(),c===null&&(c=ta(),c=c!==null?c:null));n[a]={nextPos:b,result:c};return c}function va(){var a="simple_statement@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=V();c===null&&(c=wa(),c===null&&(c=Ya(),c===null&&(c=Za(),c===null&&(c=
$a(),c===null&&(c=pa(),c=c!==null?c:null)))));c=c!==null?c:null;n[a]={nextPos:b,result:c};return c}function Ya(){var e="selection_statement@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,2)==="if"){var d="if";b+=2}else d=null,j&&i('"if"');if(d!==null){var l=C();if(l!==null){var k=z();if(k!==null){var g=D();if(g!==null){var h=U();if(h!==null){var m=b;if(a.substr(b,4)==="else"){var s="else";b+=4}else s=null,j&&i('"else"');if(s!==null){var p=o(),p=p!==null?p:"";if(p!==null){var q=U();
q!==null?s=[s,p,q]:(s=null,b=m)}else s=null,b=m}else s=null,b=m;m=s!==null?s:"";m!==null?d=[d,l,k,g,h,m]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c;if(d!==null){c=d[5];v=new r({type:"if_statement",condition:d[2],body:d[4]});if(c)v.elseBody=c[2];c=v}else c=null;n[e]={nextPos:b,result:c};return c}function ab(){var e="for_loop@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,3)==="for"){var d="for";b+=3}else d=null,j&&i('"for"');if(d!==null){var l=
C();if(l!==null){var k=wa();k===null&&(k=V(),k=k!==null?k:null);if(k!==null){var g=xa(),g=g!==null?g:"";if(g!==null){var h=t();if(h!==null){var m=z(),m=m!==null?m:"";if(m!==null){var s=D();if(s!==null){var o=J();o!==null?d=[d,l,k,g,h,m,s,o]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"for_statement",initializer:d[2],condition:d[3],increment:d[5],body:d[7]}):null;n[e]={nextPos:b,result:c};return c}
function ya(){var e="while_statement@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,5)==="while"){var d="while";b+=5}else d=null,j&&i('"while"');if(d!==null){var l=C();if(l!==null){var k=xa();if(k!==null){var g=D();g!==null?d=[d,l,k,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?{condition:d[2]}:null;n[e]={nextPos:b,result:c};return c}function bb(){var a="while_loop@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ya();if(d!==null){var f=J();f!==null?
d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"while_statement",condition:d[0].condition,body:d[1]}):null;n[a]={nextPos:b,result:c};return c}function cb(){var e="do_while@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,2)==="do"){var d="do";b+=2}else d=null,j&&i('"do"');if(d!==null){var l=U();if(l!==null){var k=ya();k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"do_statement",condition:d[2].condition,body:d[1]}):null;n[e]={nextPos:b,
result:c};return c}function Za(){var a="iteration_statement@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=bb();c===null&&(c=cb(),c===null&&(c=ab(),c=c!==null?c:null));n[a]={nextPos:b,result:c};return c}function $a(){var e="jump_statement@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,6)==="return"){var d="return";b+=6}else d=null,j&&i('"return"');if(d!==null){var l=z();if(l!==null){var k=t();k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"return",
value:d[1]}):null;c===null&&(c=b,a.substr(b,8)==="continue"?(d="continue",b+=8):(d=null,j&&i('"continue"')),d!==null?(l=t(),l!==null?d=[d,l]:(d=null,b=c)):(d=null,b=c),d!==null?c=d:(c=b,a.substr(b,5)==="break"?(d="break",b+=5):(d=null,j&&i('"break"')),d!==null?(l=t(),l!==null?d=[d,l]:(d=null,b=c)):(d=null,b=c),d!==null?c=d:(c=b,a.substr(b,6)==="return"?(d="return",b+=6):(d=null,j&&i('"return"')),d!==null?(l=t(),l!==null?d=[d,l]:(d=null,b=c)):(d=null,b=c),d!==null?c=d:(d=c=b,l=K=="fs"?"":null,l!==
null?(a.substr(b,7)==="discard"?(k="discard",b+=7):(k=null,j&&i('"discard"')),k!==null?l=[l,k]:(l=null,b=d)):(l=null,b=d),d=l!==null?"discard":null,d!==null?(l=t(),l!==null?d=[d,l]:(d=null,b=c)):(d=null,b=c),c=d!==null?d:null))),c=c!==null?new r({type:c[0]}):null,c=c!==null?c:null);n[e]={nextPos:b,result:c};return c}function wa(){var a="expression_statement@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=z(),d=d!==null?d:"";if(d!==null){var f=t();f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=
c;c=d!==null?new r({type:"expression",expression:d[0]}):null;n[a]={nextPos:b,result:c};return c}function V(){var e="declaration@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=b,l=ua();if(l!==null){var k=t();k!==null?l=[l,k]:(l=null,b=d)}else l=null,b=d;d=l!==null?l[0]:null;if(d===null){d=b;l=L();if(l!==null)if(k=o(),k!==null){var g=za();if(g!==null){var h=t();h!==null?l=[l,k,g,h]:(l=null,b=d)}else l=null,b=d}else l=null,b=d;else l=null,b=d;d=l!==null?new r({type:"declarator",typeAttribute:l[0],
declarators:l[2]}):null;if(d===null){d=b;l=K=="vs"?"":null;if(l!==null)if(a.substr(b,9)==="invariant"?(k="invariant",b+=9):(k=null,j&&i('"invariant"')),k!==null)if(g=o(),g!==null)if(h=x(),h!==null){var m=[],s=b,p=u();if(p!==null){var q=x();q!==null?p=[p,q]:(p=null,b=s)}else p=null,b=s;for(;p!==null;)m.push(p),s=b,p=u(),p!==null?(q=x(),q!==null?p=[p,q]:(p=null,b=s)):(p=null,b=s);m!==null?(s=t(),s!==null?l=[l,k,g,h,m,s]:(l=null,b=d)):(l=null,b=d)}else l=null,b=d;else l=null,b=d;else l=null,b=d;else l=
null,b=d;d=l!==null?function(a,b){var c=[a].concat(b.map(function(a){return a[1]}));return new r({type:"invariant",identifiers:c})}(l[3],l[4]):null;d===null&&(d=b,a.substr(b,9)==="precision"?(l="precision",b+=9):(l=null,j&&i('"precision"')),l!==null?(k=o(),k!==null?(g=W(),g!==null?(h=o(),h!==null?(m=M(),m!==null?(s=t(),s!==null?l=[l,k,g,h,m,s]:(l=null,b=d)):(l=null,b=d)):(l=null,b=d)):(l=null,b=d)):(l=null,b=d)):(l=null,b=d),d=l!==null?new r({type:"precision",precision:l[2],typeName:l[4]}):null,d=
d!==null?d:null)}}(j=c)&&d===null&&i("declaration");n[e]={nextPos:b,result:d};return d}function Va(){var a="global_declaration@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=V();if(c===null){var c=b,d=db();if(d!==null){var f=o();if(f!==null){var e=za();if(e!==null){var g=t();g!==null?d=[d,f,e,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"declarator",typeAttribute:d[0],declarators:d[2]}):null;c===null&&(c=b,d=eb(),d!==null?(f=o(),f!==null?(e=fb(),e!==null?(g=
t(),g!==null?d=[d,f,e,g]:(d=null,b=c)):(d=null,b=c)):(d=null,b=c)):(d=null,b=c),c=d!==null?new r({type:"declarator",typeAttribute:d[0],declarators:d[2]}):null,c=c!==null?c:null)}n[a]={nextPos:b,result:c};return c}function gb(){var e="function_prototype_parameter_list@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,4)==="void"?(c="void",b+=4):(c=null,j&&i('"void"'));if(c===null){var c=b,d=X();if(d!==null){var l=[],k=b,g=u();if(g!==null){var h=X();h!==null?g=[g,h]:(g=null,b=k)}else g=null,b=
k;for(;g!==null;)l.push(g),k=b,g=u(),g!==null?(h=X(),h!==null?g=[g,h]:(g=null,b=k)):(g=null,b=k);l!==null?d=[d,l]:(d=null,b=c)}else d=null,b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;c=c!==null?c:null}n[e]={nextPos:b,result:c};return c}function ua(){var a="function_prototype@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=hb();d===null&&(d=N(),d=d!==null?d:null);if(d!==null){var f=o();if(f!==null){var e=x();if(e!==null){var g=C();if(g!==null){var h=
gb(),h=h!==null?h:"";if(h!==null){var i=D();i!==null?d=[d,f,e,g,h,i]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c;if(d!==null){c=d[4];v=new r({type:"function_prototype",name:d[2].name,returnType:d[0],parameters:c});if(c=="void"||!c)v.parameters=[];c=v}else c=null;n[a]={nextPos:b,result:c};return c}function ib(){var e="parameter_qualifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,5)==="inout"?(c="inout",b+=5):(c=null,j&&i('"inout"'));c===
null&&(a.substr(b,2)==="in"?(c="in",b+=2):(c=null,j&&i('"in"')),c===null&&(a.substr(b,3)==="out"?(c="out",b+=3):(c=null,j&&i('"out"')),c=c!==null?c:null));n[e]={nextPos:b,result:c};return c}function X(){var a="parameter_declaration@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var d=c=b,f=Y();if(f!==null){var e=o();e!==null?f=[f,e]:(f=null,b=d)}else f=null,b=d;d=f!==null?f:"";if(d!==null){f=b;e=ib();if(e!==null){var g=o();g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?e:"";if(f!==null){e=
b;g=W();if(g!==null){var h=o();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;e=g!==null?g:"";if(e!==null)if(g=M(),g!==null)if(h=o(),h!==null){var i=x();if(i!==null){var j=b,m=w();if(m!==null){var p=G();if(p!==null){var q=B();q!==null?m=[m,p,q]:(m=null,b=j)}else m=null,b=j}else m=null,b=j;j=m!==null?m:"";j!==null?d=[d,f,e,g,h,i,j]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;else d=null,b=c;else d=null,b=c}else d=null,b=c}else d=null,b=c;if(d!==null){c=d[0];f=d[1];e=d[2];g=d[6];d=new r({type:"parameter",
type_name:d[3],name:d[5].name});if(c)d.typeQualifier=c[0];if(f)d.parameterQualifier=f[0];if(e)d.precision=e[0];if(g)d.arraySize=g[1];c=d.typeQualifier&&d.parameterQualifier&&d.parameterQualifier!="in"?null:d}else c=null;n[a]={nextPos:b,result:c};return c}function za(){var a="init_declarator_list@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=Z();if(d!==null){var f=[],e=b,g=u();if(g!==null){var h=Z();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=u(),g!==null?(h=
Z(),h!==null?g=[g,h]:(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function jb(){var a="declarator_list@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=O();if(d!==null){var f=[],e=b,g=u();if(g!==null){var h=O();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=u(),g!==null?(h=O(),h!==null?g=[g,h]:(g=null,b=e)):(g=
null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function fb(){var a="declarator_list_no_array@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=P();if(d!==null){var f=[],e=b,g=u();if(g!==null){var h=P();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=u(),g!==null?(h=P(),h!==null?g=[g,h]:(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=
null,b=c)}else d=null,b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Aa(){var a="declarator_list_arrays_have_size@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=Q();if(d!==null){var f=[],e=b,g=u();if(g!==null){var h=Q();h!==null?g=[g,h]:(g=null,b=e)}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=u(),g!==null?(h=Q(),h!==null?g=[g,h]:(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,
b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function P(){var a="declarator_no_array@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=x();c=c!==null?new r({type:"declarator_item",name:c}):null;n[a]={nextPos:b,result:c};return c}function Q(){var a="declarator_array_with_size@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=x();if(d!==null){var f=w();if(f!==null){var e=G();if(e!==null){var g=B();g!==null?d=[d,f,
e,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"declarator_item",name:d[0],arraySize:d[2],isArray:true}):null;c===null&&(c=P(),c=c!==null?c:null);n[a]={nextPos:b,result:c};return c}function O(){var a="declarator@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=x();if(d!==null){var f=w();if(f!==null){var e=B();e!==null?d=[d,f,e]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"declarator_item",name:d[0],isArray:true}):null;c===null&&
(c=Q(),c=c!==null?c:null);n[a]={nextPos:b,result:c};return c}function Z(){var a="init_declarator@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=x();if(d!==null){var f=Ra();if(f!==null){var e=G();e!==null?d=[d,f,e]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"declarator_item",name:d[0],initializer:d[2]}):null;c===null&&(c=O(),c=c!==null?c:null);n[a]={nextPos:b,result:c};return c}function kb(){var a="member_list@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=L();
if(d!==null){var f=o();if(f!==null){var e=Aa();if(e!==null){var g=t();g!==null?d=[d,f,e,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;if(d!==null)for(var h=[];d!==null;)h.push(d),c=b,d=L(),d!==null?(f=o(),f!==null?(e=Aa(),e!==null?(g=t(),g!==null?d=[d,f,e,g]:(d=null,b=c)):(d=null,b=c)):(d=null,b=c)):(d=null,b=c);else h=null;c=h!==null?function(a){return a.map(function(a){return new r({type:"declarator",typeAttribute:a[0],declarators:a[2]})})}(h):null;n[a]={nextPos:b,result:c};return c}
function Wa(){var e="struct_definition@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var d=c=b,l=Ba();l===null&&(l=Ca(),l=l!==null?l:null);if(l!==null){var k=o();k!==null?l=[l,k]:(l=null,b=d)}else l=null,b=d;d=l!==null?l:"";if(d!==null)if(a.substr(b,6)==="struct"?(l="struct",b+=6):(l=null,j&&i('"struct"')),l!==null){var k=b,g=o();if(g!==null){var h=x();h!==null?g=[g,h]:(g=null,b=k)}else g=null,b=k;k=g!==null?g:"";if(k!==null)if(g=ma(),g!==null)if(h=kb(),h!==null){var m=na();if(m!==null){var s=jb(),
s=s!==null?s:"";if(s!==null){var p=t();p!==null?d=[d,l,k,g,h,m,s,p]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;else d=null,b=c;else d=null,b=c}else d=null,b=c;else d=null,b=c;if(d!==null){c=d[0];l=d[2];k=d[6];d=new r({type:"struct_definition",members:d[4]});if(c)d.qualifier=c[0];if(l)d.name=l[1].name,lb[d.name]=d;if(k)d.declarators=k;c=d}else c=null;n[e]={nextPos:b,result:c};return c}function N(){var a="precision_type@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var d=c=b,f=W();if(f!==
null){var e=o();e!==null?f=[f,e]:(f=null,b=d)}else f=null,b=d;d=f!==null?f:"";d!==null?(f=M(),f!==null?d=[d,f]:(d=null,b=c)):(d=null,b=c);if(d!==null){c=d[0];d=new r({type:"type",name:d[1]});if(c)d.precision=c[0];c=d}else c=null;n[a]={nextPos:b,result:c};return c}function L(){var a="locally_specified_type@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=b,f=b,e=Y();if(e!==null){var g=o();g!==null?e=[e,g]:(e=null,b=f)}else e=null,b=f;f=e!==null?e:"";f!==null?(e=N(),e!==null?f=[f,e]:(f=
null,b=d)):(f=null,b=d);if(f!==null){d=f[0];f=f[1];if(d)f.qualifier=d[0];d=f}else d=null;(j=c)&&d===null&&i("locally specified type");n[a]={nextPos:b,result:d};return d}function Ca(){var e="attribute_qualifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=K=="vs"?"":null;if(d!==null){if(a.substr(b,9)==="attribute"){var l="attribute";b+=9}else l=null,j&&i('"attribute"');l!==null?d=[d,l]:(d=null,b=c)}else d=null,b=c;c=d!==null?"attribute":null;n[e]={nextPos:b,result:c};return c}function eb(){var a=
"attribute_type@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=b,f=Ca();if(f!==null){var e=o();if(e!==null){var g=N();g!==null?f=[f,e,g]:(f=null,b=d)}else f=null,b=d}else f=null,b=d;f!==null?(d=f[2],d.qualifier=f[0]):d=null;(j=c)&&d===null&&i("locally specified type");n[a]={nextPos:b,result:d};return d}function db(){var a="fully_specified_type@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=b,f=b,e=Ba();if(e!==null){var g=o();g!==null?e=[e,g]:(e=null,b=f)}else e=null,
b=f;f=e!==null?e:"";f!==null?(e=N(),e!==null?f=[f,e]:(f=null,b=d)):(f=null,b=d);if(f!==null){d=f[0];f=f[1];if(d)f.qualifier=d[0];d=f}else d=null;(j=c)&&d===null&&i("fully specified type");n[a]={nextPos:b,result:d};return d}function W(){var e="precision_qualifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;if(a.substr(b,5)==="highp"){var d="highp";b+=5}else d=null,j&&i('"highp"');d===null&&(a.substr(b,7)==="mediump"?(d="mediump",b+=7):(d=null,j&&i('"mediump"')),d===null&&(a.substr(b,4)===
"lowp"?(d="lowp",b+=4):(d=null,j&&i('"lowp"')),d=d!==null?d:null));(j=c)&&d===null&&i("precision qualifier");n[e]={nextPos:b,result:d};return d}function Y(){var e="const_qualifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,5)==="const"?(c="const",b+=5):(c=null,j&&i('"const"'));n[e]={nextPos:b,result:c};return c}function Ba(){var e="type_qualifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;var d=Y();if(d===null&&(a.substr(b,7)==="varying"?(d="varying",b+=7):(d=null,j&&i('"varying"')),
d===null)){d=b;if(a.substr(b,9)==="invariant"){var l="invariant";b+=9}else l=null,j&&i('"invariant"');if(l!==null){var k=o();if(k!==null){if(a.substr(b,7)==="varying"){var g="varying";b+=7}else g=null,j&&i('"varying"');g!==null?l=[l,k,g]:(l=null,b=d)}else l=null,b=d}else l=null,b=d;d=l!==null?"invariant varying":null;d===null&&(a.substr(b,7)==="uniform"?(d="uniform",b+=7):(d=null,j&&i('"uniform"')),d=d!==null?d:null)}(j=c)&&d===null&&i("type qualifier");n[e]={nextPos:b,result:d};return d}function hb(){var e=
"void_type@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;if(a.substr(b,4)==="void"){var d="void";b+=4}else d=null,j&&i('"void"');d=d!==null?new r({type:"type",name:"void"}):null;(j=c)&&d===null&&i("void");n[e]={nextPos:b,result:d};return d}function M(){var e="type_name@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;if(a.substr(b,5)==="float"){var d="float";b+=5}else d=null,j&&i('"float"');d===null&&(a.substr(b,3)==="int"?(d="int",b+=3):(d=null,j&&i('"int"')),d===null&&(a.substr(b,
4)==="bool"?(d="bool",b+=4):(d=null,j&&i('"bool"')),d===null&&(a.substr(b,9)==="sampler2D"?(d="sampler2D",b+=9):(d=null,j&&i('"sampler2D"')),d===null&&(a.substr(b,11)==="samplerCube"?(d="samplerCube",b+=11):(d=null,j&&i('"samplerCube"')),d===null&&(d=Da(),d===null&&(d=Ea(),d===null&&(d=x(),d=d!==null?d.name in lb?d.name:null:null,d=d!==null?d:null)))))));(j=c)&&d===null&&i("type name");n[e]={nextPos:b,result:d};return d}function x(){var e="identifier@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=
j;j=false;var d=b,l=b,k=j;j=false;var g=b,h=mb();if(h!==null){if(a.substr(b).match(/^[^A-Za-z_0-9]/)!==null){var m=a.charAt(b);b++}else m=null,j&&i("[^A-Za-z_0-9]");m!==null?h=[h,m]:(h=null,b=g)}else h=null,b=g;j=k;h===null?k="":(k=null,b=l);if(k!==null)if(a.substr(b).match(/^[A-Za-z_]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[A-Za-z_]")),l!==null){g=[];a.substr(b).match(/^[A-Za-z_0-9]/)!==null?(h=a.charAt(b),b++):(h=null,j&&i("[A-Za-z_0-9]"));for(;h!==null;)g.push(h),a.substr(b).match(/^[A-Za-z_0-9]/)!==
null?(h=a.charAt(b),b++):(h=null,j&&i("[A-Za-z_0-9]"));g!==null?l=[k,l,g]:(l=null,b=d)}else l=null,b=d;else l=null,b=d;d=l!==null?new r({type:"identifier",name:l[1]+l[2].join("")}):null;(j=c)&&d===null&&i("identifier");n[e]={nextPos:b,result:d};return d}function mb(){var e="keyword@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;if(a.substr(b,9)==="attribute"){var d="attribute";b+=9}else d=null,j&&i('"attribute"');d===null&&(a.substr(b,5)==="const"?(d="const",b+=5):(d=null,j&&i('"const"')),
d===null&&(a.substr(b,4)==="bool"?(d="bool",b+=4):(d=null,j&&i('"bool"')),d===null&&(a.substr(b,5)==="float"?(d="float",b+=5):(d=null,j&&i('"float"')),d===null&&(a.substr(b,3)==="int"?(d="int",b+=3):(d=null,j&&i('"int"')),d===null&&(a.substr(b,5)==="break"?(d="break",b+=5):(d=null,j&&i('"break"')),d===null&&(a.substr(b,8)==="continue"?(d="continue",b+=8):(d=null,j&&i('"continue"')),d===null&&(a.substr(b,2)==="do"?(d="do",b+=2):(d=null,j&&i('"do"')),d===null&&(a.substr(b,4)==="else"?(d="else",b+=4):
(d=null,j&&i('"else"')),d===null&&(a.substr(b,3)==="for"?(d="for",b+=3):(d=null,j&&i('"for"')),d===null&&(a.substr(b,2)==="if"?(d="if",b+=2):(d=null,j&&i('"if"')),d===null&&(a.substr(b,7)==="discard"?(d="discard",b+=7):(d=null,j&&i('"discard"')),d===null&&(a.substr(b,6)==="return"?(d="return",b+=6):(d=null,j&&i('"return"')),d===null&&(d=Da(),d===null&&(d=Ea(),d===null&&(a.substr(b,2)==="in"?(d="in",b+=2):(d=null,j&&i('"in"')),d===null&&(a.substr(b,3)==="out"?(d="out",b+=3):(d=null,j&&i('"out"')),
d===null&&(a.substr(b,5)==="inout"?(d="inout",b+=5):(d=null,j&&i('"inout"')),d===null&&(a.substr(b,7)==="uniform"?(d="uniform",b+=7):(d=null,j&&i('"uniform"')),d===null&&(a.substr(b,7)==="varying"?(d="varying",b+=7):(d=null,j&&i('"varying"')),d===null&&(a.substr(b,9)==="sampler2D"?(d="sampler2D",b+=9):(d=null,j&&i('"sampler2D"')),d===null&&(a.substr(b,11)==="samplerCube"?(d="samplerCube",b+=11):(d=null,j&&i('"samplerCube"')),d===null&&(a.substr(b,6)==="struct"?(d="struct",b+=6):(d=null,j&&i('"struct"')),
d===null&&(a.substr(b,4)==="void"?(d="void",b+=4):(d=null,j&&i('"void"')),d===null&&(a.substr(b,5)==="while"?(d="while",b+=5):(d=null,j&&i('"while"')),d===null&&(a.substr(b,5)==="highp"?(d="highp",b+=5):(d=null,j&&i('"highp"')),d===null&&(a.substr(b,7)==="mediump"?(d="mediump",b+=7):(d=null,j&&i('"mediump"')),d===null&&(a.substr(b,4)==="lowp"?(d="lowp",b+=4):(d=null,j&&i('"lowp"')),d===null&&(a.substr(b,4)==="true"?(d="true",b+=4):(d=null,j&&i('"true"')),d===null&&(a.substr(b,5)==="false"?(d="false",
b+=5):(d=null,j&&i('"false"')),d=d!==null?d:null)))))))))))))))))))))))))))));(j=c)&&d===null&&i("keyword");n[e]={nextPos:b,result:d};return d}function Da(){var e="vector@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b).match(/^[bi]/)!==null){var d=a.charAt(b);b++}else d=null,j&&i("[bi]");d=d!==null?d:"";if(d!==null){if(a.substr(b,3)==="vec"){var l="vec";b+=3}else l=null,j&&i('"vec"');if(l!==null){if(a.substr(b).match(/^[234]/)!==null){var k=a.charAt(b);b++}else k=null,j&&i("[234]");
k!==null?d=[d,l,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?d.join(""):null;n[e]={nextPos:b,result:c};return c}function Ea(){var e="matrix@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,3)==="mat"){var d="mat";b+=3}else d=null,j&&i('"mat"');if(d!==null){if(a.substr(b).match(/^[234]/)!==null){var l=a.charAt(b);b++}else l=null,j&&i("[234]");l!==null?d=[d,l]:(d=null,b=c)}else d=null,b=c;c=d!==null?d.join(""):null;n[e]={nextPos:b,result:c};return c}function Fa(){var e="single_underscore_identifier@"+
b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=[];if(a.substr(b).match(/^[A-Za-z0-9]/)!==null){var l=a.charAt(b);b++}else l=null,j&&i("[A-Za-z0-9]");for(;l!==null;)d.push(l),a.substr(b).match(/^[A-Za-z0-9]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[A-Za-z0-9]"));if(d!==null)if(a.substr(b,1)==="_"?(l="_",b+=1):(l=null,j&&i('"_"')),l!==null){if(a.substr(b).match(/^[A-Za-z0-9]/)!==null){var k=a.charAt(b);b++}else k=null,j&&i("[A-Za-z0-9]");if(k!==null)for(var g=[];k!==null;)g.push(k),a.substr(b).match(/^[A-Za-z0-9]/)!==
null?(k=a.charAt(b),b++):(k=null,j&&i("[A-Za-z0-9]"));else g=null;g!==null?d=[d,l,g]:(d=null,b=c)}else d=null,b=c;else d=null,b=c;n[e]={nextPos:b,result:d};return d}function nb(){var e="int_constant@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b).match(/^[1-9]/)!==null){var d=a.charAt(b);b++}else d=null,j&&i("[1-9]");if(d!==null){var l=[];if(a.substr(b).match(/^[0-9]/)!==null){var k=a.charAt(b);b++}else k=null,j&&i("[0-9]");for(;k!==null;)l.push(k),a.substr(b).match(/^[0-9]/)!==null?
(k=a.charAt(b),b++):(k=null,j&&i("[0-9]"));l!==null?d=[d,l]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"int",value:parseInt([d[0]].concat(d[1]).join(""),10)}):null;if(c===null){c=b;a.substr(b,1)==="0"?(d="0",b+=1):(d=null,j&&i('"0"'));if(d!==null)if(a.substr(b).match(/^[Xx]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[Xx]")),l!==null){a.substr(b).match(/^[0-9A-Fa-f]/)!==null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9A-Fa-f]"));if(k!==null)for(var g=[];k!==null;)g.push(k),a.substr(b).match(/^[0-9A-Fa-f]/)!==
null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9A-Fa-f]"));else g=null;g!==null?d=[d,l,g]:(d=null,b=c)}else d=null,b=c;else d=null,b=c;c=d!==null?new r({type:"int",value:parseInt(d[2].join(""),16)}):null;if(c===null){c=b;a.substr(b,1)==="0"?(d="0",b+=1):(d=null,j&&i('"0"'));if(d!==null){a.substr(b).match(/^[0-7]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[0-7]"));if(l!==null)for(k=[];l!==null;)k.push(l),a.substr(b).match(/^[0-7]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[0-7]"));else k=null;k!==null?
d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"int",value:parseInt(d[1].join(""),8)}):null;c===null&&(a.substr(b,1)==="0"?(c="0",b+=1):(c=null,j&&i('"0"')),c=c!==null?new r({type:"int",value:0}):null,c=c!==null?c:null)}}n[e]={nextPos:b,result:c};return c}function ob(){var e="float_constant@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=[];if(a.substr(b).match(/^[0-9]/)!==null){var l=a.charAt(b);b++}else l=null,j&&i("[0-9]");for(;l!==null;)d.push(l),a.substr(b).match(/^[0-9]/)!==
null?(l=a.charAt(b),b++):(l=null,j&&i("[0-9]"));if(d!==null)if(a.substr(b,1)==="."?(l=".",b+=1):(l=null,j&&i('"."')),l!==null){if(a.substr(b).match(/^[0-9]/)!==null){var k=a.charAt(b);b++}else k=null,j&&i("[0-9]");if(k!==null)for(var g=[];k!==null;)g.push(k),a.substr(b).match(/^[0-9]/)!==null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9]"));else g=null;g!==null?(k=$(),k=k!==null?k:"",k!==null?d=[d,l,g,k]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c;else d=null,b=c;if(d!==null)c=d;else{c=b;a.substr(b).match(/^[0-9]/)!==
null?(l=a.charAt(b),b++):(l=null,j&&i("[0-9]"));if(l!==null)for(d=[];l!==null;)d.push(l),a.substr(b).match(/^[0-9]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[0-9]"));else d=null;if(d!==null)if(a.substr(b,1)==="."?(l=".",b+=1):(l=null,j&&i('"."')),l!==null){g=[];a.substr(b).match(/^[0-9]/)!==null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9]"));for(;k!==null;)g.push(k),a.substr(b).match(/^[0-9]/)!==null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9]"));g!==null?(k=$(),k=k!==null?k:"",k!==null?d=[d,l,g,k]:(d=null,
b=c)):(d=null,b=c)}else d=null,b=c;else d=null,b=c;c=d!==null?d:null}c!==null?(c[0]=c[0].join(""),c[2]=c[2].join(""),c=new r({type:"float",value:parseFloat(c.join(""))})):c=null;if(c===null){c=b;a.substr(b).match(/^[0-9]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[0-9]"));if(l!==null)for(d=[];l!==null;)d.push(l),a.substr(b).match(/^[0-9]/)!==null?(l=a.charAt(b),b++):(l=null,j&&i("[0-9]"));else d=null;d!==null?(l=$(),l!==null?d=[d,l]:(d=null,b=c)):(d=null,b=c);c=d!==null?new r({type:"float",value:parseFloat(d[0].join("")+
d[1])}):null;c=c!==null?c:null}n[e]={nextPos:b,result:c};return c}function $(){var e="float_exponent@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b).match(/^[Ee]/)!==null){var d=a.charAt(b);b++}else d=null,j&&i("[Ee]");if(d!==null){if(a.substr(b).match(/^[+\-]/)!==null){var l=a.charAt(b);b++}else l=null,j&&i("[+\\-]");l=l!==null?l:"";if(l!==null){if(a.substr(b).match(/^[0-9]/)!==null){var k=a.charAt(b);b++}else k=null,j&&i("[0-9]");if(k!==null)for(var g=[];k!==null;)g.push(k),a.substr(b).match(/^[0-9]/)!==
null?(k=a.charAt(b),b++):(k=null,j&&i("[0-9]"));else g=null;g!==null?d=[d,l,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?["e",d[1]].concat(d[2]).join(""):null;n[e]={nextPos:b,result:c};return c}function pb(){var a="paren_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=C();if(d!==null){var f=z();if(f!==null){var e=D();e!==null?d=[d,f,e]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?d[1]:null;n[a]={nextPos:b,result:c};return c}function qb(){var e="bool_constant@"+
b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,4)==="true"?(c="true",b+=4):(c=null,j&&i('"true"'));c===null&&(a.substr(b,5)==="false"?(c="false",b+=5):(c=null,j&&i('"false"')),c=c!==null?c:null);c=c!==null?new r({type:"bool",value:c=="true"}):null;n[e]={nextPos:b,result:c};return c}function rb(){var a="primary_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=sb();c===null&&(c=x(),c===null&&(c=ob(),c===null&&(c=nb(),c===null&&(c=qb(),c===null&&(c=pb(),c=c!==null?c:null)))));n[a]={nextPos:b,
result:c};return c}function R(){var a="index_accessor@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=w();if(d!==null){var f=z();if(f!==null){var e=B();e!==null?d=[d,f,e]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"accessor",index:d[1]}):null;n[a]={nextPos:b,result:c};return c}function S(){var e="field_selector@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="."){var d=".";b+=1}else d=null,j&&i('"."');if(d!==null){var l=x();l!==null?d=[d,l]:(d=null,
b=c)}else d=null,b=c;c=d!==null?new r({type:"field_selector",selection:d[1].name}):null;n[e]={nextPos:b,result:c};return c}function tb(){var a="postfix_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=rb();if(d!==null){var f=[],e=S();e===null&&(e=R(),e=e!==null?e:null);for(;e!==null;)f.push(e),e=S(),e===null&&(e=R(),e=e!==null?e:null);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;if(d!==null){c=d[1];d=d[0];for(f=0;f<c.length;f++)d=new r({type:"postfix",operator:c[f],expression:d});
c=d}else c=null;n[a]={nextPos:b,result:c};return c}function ub(){var e="postfix_expression_no_repeat@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=tb();if(d!==null){if(a.substr(b,2)==="++"){var h="++";b+=2}else h=null,j&&i('"++"');h===null&&(a.substr(b,2)==="--"?(h="--",b+=2):(h=null,j&&i('"--"')),h=h!==null?h:null);h=h!==null?h:"";if(h!==null){var k=[],g=S();g===null&&(g=R(),g=g!==null?g:null);for(;g!==null;)k.push(g),g=S(),g===null&&(g=R(),g=g!==null?g:null);k!==null?d=[d,h,k]:(d=null,b=
c)}else d=null,b=c}else d=null,b=c;if(d!==null){h=d[1];c=d[2];d=d[0];h&&(d=new r({type:"postfix",operator:new r({id:vb++,type:"operator",operator:h}),expression:d}));for(h=0;h<c.length;h++)d=new r({type:"postfix",operator:c[h],expression:d});c=d}else c=null;n[e]={nextPos:b,result:c};return c}function wb(){var e="parameter_list@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,4)==="void"?(c="void",b+=4):(c=null,j&&i('"void"'));c=c!==null?[]:null;if(c===null){var c=b,d=z();if(d!==null){var h=
[],k=b,g=u();if(g!==null){var m=z();m!==null?g=[g,m]:(g=null,b=k)}else g=null,b=k;for(;g!==null;)h.push(g),k=b,g=u(),g!==null?(m=z(),m!==null?g=[g,m]:(g=null,b=k)):(g=null,b=k);h!==null?d=[d,h]:(d=null,b=c)}else d=null,b=c;c=d!==null?function(a,b){return[a].concat(b.map(function(a){return a[1]}))}(d[0],d[1]):null;c=c!==null?c:null}n[e]={nextPos:b,result:c};return c}function sb(){var a="function_call@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=xb();if(d!==null){var f=C();if(f!==null){var e=
wb(),e=e!==null?e:"";if(e!==null){var g=D();g!==null?d=[d,f,e,g]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c;if(d!==null){c=d[2];d=new r({type:"function_call",function_name:d[0],parameters:c});if(!c)d.parameters=[];c=d}else c=null;n[a]={nextPos:b,result:c};return c}function xb(){var a="function_identifier@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=x();c=c!==null?c.name:null;c===null&&(c=M(),c=c!==null?c:null);n[a]={nextPos:b,result:c};return c}function yb(){var e="unary_expression@"+
b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,2)==="++"){var d="++";b+=2}else d=null,j&&i('"++"');d===null&&(a.substr(b,2)==="--"?(d="--",b+=2):(d=null,j&&i('"--"')),d===null&&(a.substr(b,1)==="!"?(d="!",b+=1):(d=null,j&&i('"!"')),d===null&&(a.substr(b,1)==="~"?(d="~",b+=1):(d=null,j&&i('"~"')),d===null&&(a.substr(b,1)==="+"?(d="+",b+=1):(d=null,j&&i('"+"')),d===null&&(a.substr(b,1)==="-"?(d="-",b+=1):(d=null,j&&i('"-"')),d=d!==null?d:null)))));d=d!==null?d:"";if(d!==null){var h=o(),
h=h!==null?h:"";if(h!==null){var k=ub();k!==null?d=[d,h,k]:(d=null,b=c)}else d=null,b=c}else d=null,b=c;d!==null?(c=d[0],v=d[2],c&&(v=new r({type:"unary",expression:v,operator:new r({type:"operator",operator:c})})),c=v):c=null;n[e]={nextPos:b,result:c};return c}function Ga(){var e="multiplicative_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="*"){var d="*";b+=1}else d=null,j&&i('"*"');d===null&&(a.substr(b,1)==="/"?(d="/",b+=1):(d=null,j&&i('"/"')),d===null&&(a.substr(b,
1)==="%"?(d="%",b+=1):(d=null,j&&i('"%"')),d=d!==null?d:null));if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="="){var g="=";b+=1}else g=null,j&&i('"="');j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:d[0]}):null;n[e]={nextPos:b,result:c};return c}function aa(){var a="multiplicative_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=yb();if(d!==null){var f=[],e=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Ga();
if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=aa();j!==null?g=[g,h,i,j]:(g=null,b=e)}else g=null,b=e}else g=null,b=e}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=o(),g=g!==null?g:"",g!==null?(h=Ga(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=aa(),j!==null?g=[g,h,i,j]:(g=null,b=e)):(g=null,b=e)):(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Ha(){var e="additive_operator@"+b,c=n[e];if(c)return b=
c.nextPos,c.result;c=b;if(a.substr(b,1)==="+"){var d="+";b+=1}else d=null,j&&i('"+"');if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="+"){var g="+";b+=1}else g=null,j&&i('"+"');g===null&&(a.substr(b,1)==="="?(g="=",b+=1):(g=null,j&&i('"="')),g=g!==null?g:null);j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:"+"}):null;c===null&&(c=b,a.substr(b,1)==="-"?(d="-",b+=1):(d=null,j&&i('"-"')),d!==null?(h=b,k=j,j=false,a.substr(b,
1)==="-"?(g="-",b+=1):(g=null,j&&i('"-"')),g===null&&(a.substr(b,1)==="="?(g="=",b+=1):(g=null,j&&i('"="')),g=g!==null?g:null),j=k,g===null?k="":(k=null,b=h),k!==null?d=[d,k]:(d=null,b=c)):(d=null,b=c),c=d!==null?new r({type:"operator",operator:"-"}):null,c=c!==null?c:null);n[e]={nextPos:b,result:c};return c}function ba(){var a="additive_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=aa();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Ha();if(h!==null){var i=
o(),i=i!==null?i:"";if(i!==null){var j=ba();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Ha(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ba(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Ia(){var e="shift_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;
c=b;if(a.substr(b,2)==="<<"){var d="<<";b+=2}else d=null,j&&i('"<<"');d===null&&(a.substr(b,2)===">>"?(d=">>",b+=2):(d=null,j&&i('">>"')),d=d!==null?d:null);if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="="){var g="=";b+=1}else g=null,j&&i('"="');j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:d[0]}):null;n[e]={nextPos:b,result:c};return c}function ca(){var a="shift_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;
var c=b,d=ba();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Ia();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ca();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Ia(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ca(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]=
{nextPos:b,result:c};return c}function Ja(){var e="relational_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="<"){var d="<";b+=1}else d=null,j&&i('"<"');if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="<"){var g="<";b+=1}else g=null,j&&i('"<"');j=k;g===null?k="":(k=null,b=h);k!==null?(a.substr(b,1)==="="?(h="=",b+=1):(h=null,j&&i('"="')),h=h!==null?h:"",h!==null?d=[d,k,h]:(d=null,b=c)):(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:"<"+d[2]}):
null;c===null&&(c=b,a.substr(b,1)===">"?(d=">",b+=1):(d=null,j&&i('">"')),d!==null?(h=b,k=j,j=false,a.substr(b,1)===">"?(g=">",b+=1):(g=null,j&&i('">"')),j=k,g===null?k="":(k=null,b=h),k!==null?(a.substr(b,1)==="="?(h="=",b+=1):(h=null,j&&i('"="')),h=h!==null?h:"",h!==null?d=[d,k,h]:(d=null,b=c)):(d=null,b=c)):(d=null,b=c),c=d!==null?new r({type:"operator",operator:">"+d[2]}):null,c=c!==null?c:null);n[e]={nextPos:b,result:c};return c}function da(){var a="relational_expression@"+b,c=n[a];if(c)return b=
c.nextPos,c.result;var c=b,d=ca();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Ja();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=da();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Ja(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=da(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?
A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Ka(){var e="equality_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,2)==="=="?(c="==",b+=2):(c=null,j&&i('"=="'));c===null&&(a.substr(b,2)==="!="?(c="!=",b+=2):(c=null,j&&i('"!="')),c=c!==null?c:null);c=c!==null?new r({type:"operator",operator:c}):null;n[e]={nextPos:b,result:c};return c}function ea(){var a="equality_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=da();if(d!==null){var f=[],e=b,g=o(),g=
g!==null?g:"";if(g!==null){var h=Ka();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ea();j!==null?g=[g,h,i,j]:(g=null,b=e)}else g=null,b=e}else g=null,b=e}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=o(),g=g!==null?g:"",g!==null?(h=Ka(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ea(),j!==null?g=[g,h,i,j]:(g=null,b=e)):(g=null,b=e)):(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function La(){var e=
"bitwise_and_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="&"){var d="&";b+=1}else d=null,j&&i('"&"');if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="="){var g="=";b+=1}else g=null,j&&i('"="');g===null&&(a.substr(b,1)==="&"?(g="&",b+=1):(g=null,j&&i('"&"')),g=g!==null?g:null);j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:"&"}):null;n[e]={nextPos:b,result:c};return c}function fa(){var a="bitwise_and_expression@"+
b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ea();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=La();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=fa();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=La(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=fa(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=
null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Ma(){var e="bitwise_xor_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="^"){var d="^";b+=1}else d=null,j&&i('"^"');if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="="){var g="=";b+=1}else g=null,j&&i('"="');g===null&&(a.substr(b,1)==="^"?(g="^",b+=1):(g=null,j&&i('"^"')),g=g!==null?g:null);j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",
operator:"^"}):null;n[e]={nextPos:b,result:c};return c}function ga(){var a="bitwise_xor_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=fa();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Ma();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ga();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Ma(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ga(),j!==null?
g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Na(){var e="bitwise_or_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=b;if(a.substr(b,1)==="|"){var d="|";b+=1}else d=null,j&&i('"|"');if(d!==null){var h=b,k=j;j=false;if(a.substr(b,1)==="="){var g="=";b+=1}else g=null,j&&i('"="');g===null&&(a.substr(b,1)==="|"?(g="|",b+=1):(g=null,j&&i('"|"')),g=g!==null?
g:null);j=k;g===null?k="":(k=null,b=h);k!==null?d=[d,k]:(d=null,b=c)}else d=null,b=c;c=d!==null?new r({type:"operator",operator:"|"}):null;n[e]={nextPos:b,result:c};return c}function ha(){var a="bitwise_or_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ga();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Na();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ha();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==
null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Na(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ha(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Oa(){var e="logical_and_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,2)==="&&"?(c="&&",b+=2):(c=null,j&&i('"&&"'));c=c!==null?new r({type:"operator",operator:"&&"}):null;n[e]={nextPos:b,
result:c};return c}function ia(){var a="logical_and_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ha();if(d!==null){var f=[],e=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Oa();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ia();j!==null?g=[g,h,i,j]:(g=null,b=e)}else g=null,b=e}else g=null,b=e}else g=null,b=e;for(;g!==null;)f.push(g),e=b,g=o(),g=g!==null?g:"",g!==null?(h=Oa(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ia(),j!==null?g=[g,h,i,j]:(g=null,b=e)):(g=null,b=
e)):(g=null,b=e)):(g=null,b=e);f!==null?d=[d,f]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Pa(){var e="logical_xor_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,2)==="^^"?(c="^^",b+=2):(c=null,j&&i('"^^"'));c=c!==null?new r({type:"operator",operator:"^^"}):null;n[e]={nextPos:b,result:c};return c}function ja(){var a="logical_xor_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ia();if(d!==null){var e=[],f=
b,g=o(),g=g!==null?g:"";if(g!==null){var h=Pa();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ja();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Pa(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ja(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function Qa(){var e=
"logical_or_operator@"+b,c=n[e];if(c)return b=c.nextPos,c.result;a.substr(b,2)==="||"?(c="||",b+=2):(c=null,j&&i('"||"'));c=c!==null?new r({type:"operator",operator:"||"}):null;n[e]={nextPos:b,result:c};return c}function ka(){var a="logical_or_expression@"+b,c=n[a];if(c)return b=c.nextPos,c.result;var c=b,d=ja();if(d!==null){var e=[],f=b,g=o(),g=g!==null?g:"";if(g!==null){var h=Qa();if(h!==null){var i=o(),i=i!==null?i:"";if(i!==null){var j=ka();j!==null?g=[g,h,i,j]:(g=null,b=f)}else g=null,b=f}else g=
null,b=f}else g=null,b=f;for(;g!==null;)e.push(g),f=b,g=o(),g=g!==null?g:"",g!==null?(h=Qa(),h!==null?(i=o(),i=i!==null?i:"",i!==null?(j=ka(),j!==null?g=[g,h,i,j]:(g=null,b=f)):(g=null,b=f)):(g=null,b=f)):(g=null,b=f);e!==null?d=[d,e]:(d=null,b=c)}else d=null,b=c;c=d!==null?A(d[0],d[1]):null;n[a]={nextPos:b,result:c};return c}function G(){var e="conditional_expression@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=ka();if(d!==null){var h=b,k=o(),k=k!==null?k:"";if(k!==null){if(a.substr(b,1)===
"?"){var g="?";b+=1}else g=null,j&&i('"?"');if(g!==null){var m=o(),m=m!==null?m:"";if(m!==null){var p=z();if(p!==null){var q=o(),q=q!==null?q:"";if(q!==null){if(a.substr(b,1)===":"){var t=":";b+=1}else t=null,j&&i('":"');if(t!==null){var u=o(),u=u!==null?u:"";if(u!==null){var w=z();w!==null?k=[k,g,m,p,q,t,u,w]:(k=null,b=h)}else k=null,b=h}else k=null,b=h}else k=null,b=h}else k=null,b=h}else k=null,b=h}else k=null,b=h}else k=null,b=h;h=k!==null?k:"";h!==null?d=[d,h]:(d=null,b=c)}else d=null,b=c;d!==
null?(c=d[0],d=d[1],v=c,d&&(v=new r({type:"ternary",condition:c,is_true:d[3],is_false:d[7]})),c=v):c=null;n[e]={nextPos:b,result:c};return c}function z(){var e="assignment_expression@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=G();if(d!==null){var h=o(),h=h!==null?h:"";if(h!==null){if(a.substr(b,1)==="="){var k="=";b+=1}else k=null,j&&i('"="');k===null&&(a.substr(b,2)==="*="?(k="*=",b+=2):(k=null,j&&i('"*="')),k===null&&(a.substr(b,2)==="/="?(k="/=",b+=2):(k=null,j&&i('"/="')),k===null&&
(a.substr(b,2)==="%="?(k="%=",b+=2):(k=null,j&&i('"%="')),k===null&&(a.substr(b,2)==="+="?(k="+=",b+=2):(k=null,j&&i('"+="')),k===null&&(a.substr(b,2)==="-="?(k="-=",b+=2):(k=null,j&&i('"-="')),k===null&&(a.substr(b,3)==="<<="?(k="<<=",b+=3):(k=null,j&&i('"<<="')),k===null&&(a.substr(b,3)===">>="?(k=">>=",b+=3):(k=null,j&&i('">>="')),k===null&&(a.substr(b,2)==="&="?(k="&=",b+=2):(k=null,j&&i('"&="')),k===null&&(a.substr(b,2)==="^="?(k="^=",b+=2):(k=null,j&&i('"^="')),k===null&&(a.substr(b,2)==="|="?
(k="|=",b+=2):(k=null,j&&i('"|="')),k=k!==null?k:null))))))))));if(k!==null){var g=o(),g=g!==null?g:"";if(g!==null){var m=z();m!==null?d=[d,h,k,g,m]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c;c=d!==null?new r({type:"binary",operator:new r({type:"operator",operator:d[2]}),left:d[0],right:d[4]}):null;c===null&&(c=G(),c=c!==null?c:null);n[e]={nextPos:b,result:c};return c}function xa(){var e="condition@"+b,c=n[e];if(c)return b=c.nextPos,c.result;var c=b,d=L();if(d!==
null){var h=o();if(h!==null){var k=x();if(k!==null){var g=o(),g=g!==null?g:"";if(g!==null){if(a.substr(b,1)==="="){var m="=";b+=1}else m=null,j&&i('"="');if(m!==null){var p=o(),p=p!==null?p:"";if(p!==null){var q=z();q!==null?d=[d,h,k,g,m,p,q]:(d=null,b=c)}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c}else d=null,b=c;d!==null?c=d:(c=z(),c=c!==null?c:null);n[e]={nextPos:b,result:c};return c}function Cb(){var e;a:{e=la;e.sort();for(var c=null,d=[],h=0;h<e.length;h++)e[h]!==
c&&(d.push(e[h]),c=e[h]);switch(d.length){case 0:e="end of input";break a;case 1:e=d[0];break a;default:e=d.slice(0,d.length-1).join(", ")+" or "+d[d.length-1]}}c=Math.max(b,H);c=c<a.length?m(a.charAt(c)):"end of input";return"Expected "+e+" but "+c+" found."}function zb(){for(var b=1,c=1,d=false,e=0;e<H;e++){var h=a.charAt(e);h==="\n"?(d||b++,c=1,d=false):h==="\r"|h==="\u2028"||h==="\u2029"?(b++,c=1,d=true):(c++,d=false)}return{line:b,column:c}}function r(a){this.id=vb++;this.line=zb().line;for(var b in a)a.hasOwnProperty(b)&&
(this[b]=a[b])}function A(a,b){for(var d=a,e=0;e<b.length;e++)d=new r({type:"binary",operator:b[e][1],left:d,right:b[e][3]});return d}function Xa(a,b,d){d&&(b=b.concat([d]));d=a[0];d.guarded_statements=a[1].statements;for(var a=d,e=0;e<b.length;e++)a.elseBody=b[e][0],a.elseBody.guarded_statements=b[e][1].statements,a=a.elseBody;return d}var Ab={EOF:q,_:o,additive_expression:ba,additive_operator:Ha,assignment_expression:z,attribute_qualifier:Ca,attribute_type:eb,bitwise_and_expression:fa,bitwise_and_operator:La,
bitwise_or_expression:ha,bitwise_or_operator:Na,bitwise_xor_expression:ga,bitwise_xor_operator:Ma,bool_constant:qb,comma:u,comment:y,compound_statement:T,condition:xa,conditional_expression:G,const_qualifier:Y,declaration:V,declarator:O,declarator_array_with_size:Q,declarator_list:jb,declarator_list_arrays_have_size:Aa,declarator_list_no_array:fb,declarator_no_array:P,do_while:cb,equality_expression:ea,equality_operator:Ka,equals:Ra,expression_statement:wa,external_declaration:Ta,external_statement:oa,
external_statement_list:E,field_selector:S,float_constant:ob,float_exponent:$,for_loop:ab,fragment_start:function(){var a="fragment_start@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=b;K="fs";if(""!==null){var d=E();d!==null?d=["",d]:(d=null,b=c)}else d=null,b=c;c=d!==null?d[1]:null;n[a]={nextPos:b,result:c};return c},fully_specified_type:db,function_call:sb,function_definition:Ua,function_identifier:xb,function_prototype:ua,function_prototype_parameter_list:gb,global_declaration:Va,identifier:x,
index_accessor:R,init_declarator:Z,init_declarator_list:za,int_constant:nb,iteration_statement:Za,jump_statement:$a,keyword:mb,left_brace:ma,left_bracket:w,left_paren:C,locally_specified_type:L,logical_and_expression:ia,logical_and_operator:Oa,logical_or_expression:ka,logical_or_operator:Qa,logical_xor_expression:ja,logical_xor_operator:Pa,matrix:Ea,member_list:kb,multiplicative_expression:aa,multiplicative_operator:Ga,newLine:p,parameter_declaration:X,parameter_list:wb,parameter_qualifier:ib,paren_expression:pb,
postfix_expression:tb,postfix_expression_no_repeat:ub,precision_qualifier:W,precision_type:N,preprocessor_else:ra,preprocessor_else_if:I,preprocessor_end:sa,preprocessor_external_branch:Sa,preprocessor_if:qa,preprocessor_operator:pa,preprocessor_statement_branch:ta,primary_expression:rb,relational_expression:da,relational_operator:Ja,reserved:function(){var e="reserved@"+b,c=n[e];if(c)return b=c.nextPos,c.result;c=j;j=false;for(var d=b,h=[],k=Fa();k!==null;)h.push(k),k=Fa();if(h!==null)if(a.substr(b,
2)==="__"?(k="__",b+=2):(k=null,j&&i('"__"')),k!==null){var g=[];if(a.substr(b).match(/^[A-Za-z_0-9]/)!==null){var m=a.charAt(b);b++}else m=null,j&&i("[A-Za-z_0-9]");for(;m!==null;)g.push(m),a.substr(b).match(/^[A-Za-z_0-9]/)!==null?(m=a.charAt(b),b++):(m=null,j&&i("[A-Za-z_0-9]"));g!==null?h=[h,k,g]:(h=null,b=d)}else h=null,b=d;else h=null,b=d;(j=c)&&h===null&&i("reserved name");n[e]={nextPos:b,result:h};return h},right_brace:na,right_bracket:B,right_paren:D,selection_statement:Ya,semicolon:t,shift_expression:ca,
shift_operator:Ia,simple_statement:va,single_underscore_identifier:Fa,statement_list:F,statement_no_new_scope:J,statement_with_scope:U,struct_definition:Wa,type_name:M,type_qualifier:Ba,unary_expression:yb,vector:Da,vertex_start:function(){var a="vertex_start@"+b,c=n[a];if(c)return b=c.nextPos,c.result;c=b;K="vs";if(""!==null){var d=E();d!==null?d=["",d]:(d=null,b=c)}else d=null,b=c;c=d!==null?d[1]:null;n[a]={nextPos:b,result:c};return c},void_type:hb,while_loop:bb,while_statement:ya};if(e!==void 0){if(Ab[e]===
void 0)throw Error("Invalid rule name: "+m(e)+".");}else e="external_statement_list";var b=0,j=true,H=0,la=[],n={},lb={},vb=0,K="vs",v=Ab[e]();if(v===null||b!==a.length){var Bb=zb();throw new this.SyntaxError(Cb(),Bb.line,Bb.column);}return v},toSource:function(){return this._source},SyntaxError:function(a,e,h){this.name="SyntaxError";this.message=a;this.line=e;this.column=h}};a.SyntaxError.prototype=Error.prototype;return a}();glslunit.SpliceTransformer=function(a,f,e,h,m){glslunit.ASTTransformer.call(this);this.newNodes_=m;this.parentNode_=a;this.fieldName_=f;this.position_=e;this.elements_=h;this.removedNodes_=[]};goog.inherits(glslunit.SpliceTransformer,glslunit.ASTTransformer);glslunit.SpliceTransformer.prototype.getRemovedNodes=function(){return this.removedNodes_};
glslunit.SpliceTransformer.prototype.maybeSpliceNode=function(a){if(a==this.parentNode_)if(a=glslunit.ASTTransformer.cloneNode(a),goog.isArray(a[this.fieldName_])){var f=this.newNodes_.map(glslunit.ASTTransformer.cloneNode);a[this.fieldName_]=goog.array.clone(a[this.fieldName_]);this.removedNodes_=[].splice.apply(a[this.fieldName_],[this.position_,this.elements_].concat(f))}else throw this.fieldName_+" wasn't an array.";return a};glslunit.SpliceTransformer.prototype.getTransformFunction=function(){return this.maybeSpliceNode};
glslunit.SpliceTransformer.splice=function(a,f,e,h,m,i){return(new glslunit.SpliceTransformer(f,e,h,m,i)).transformNode(a)};glslunit.VariableScopeVisitor=function(a,f){glslunit.ASTVisitor.call(this);this.targetScope_=a||null;this.promoteIfdefVars_=!!f;this.variablesInScope_={};this.stackFrames_=[];this.currentFrame_=[];this.scopeIdToFrame_={};this.scopeParameters_=[]};goog.inherits(glslunit.VariableScopeVisitor,glslunit.ASTVisitor);
glslunit.VariableScopeVisitor.prototype.getCurrentScopeVariables=function(){var a=this.stackFrames_.concat([this.currentFrame_]),f={};goog.array.forEachRight(a,function(a){goog.array.forEach(a,function(a){a.type=="declarator"?goog.array.forEach(a.declarators,function(e){goog.isDef(f[e.name.name])||(f[e.name.name]=a)},this):a.type=="parameter"&&(f[a.name]=a)},this)},this);return f};
glslunit.VariableScopeVisitor.prototype.beforeVisitScope=function(){this.stackFrames_.push(this.currentFrame_);this.currentFrame_=[];[].push.apply(this.currentFrame_,this.scopeParameters_);this.scopeParameters_=[]};glslunit.VariableScopeVisitor.prototype.afterVisitScope=function(a){this.scopeIdToFrame_[a.id]=this.currentFrame_;if(a==this.targetScope_)this.variablesInScope_=this.getCurrentScopeVariables();this.currentFrame_=this.stackFrames_.pop()};
glslunit.VariableScopeVisitor.prototype.beforeVisitRoot=glslunit.VariableScopeVisitor.prototype.beforeVisitScope;glslunit.VariableScopeVisitor.prototype.afterVisitPreprocessor=function(a){this.promoteIfdefVars_||this.afterVisitScope(a)};glslunit.VariableScopeVisitor.prototype.beforeVisitPreprocessor=function(a){this.promoteIfdefVars_||this.beforeVisitScope(a)};glslunit.VariableScopeVisitor.prototype.afterVisitRoot=glslunit.VariableScopeVisitor.prototype.afterVisitScope;
glslunit.VariableScopeVisitor.prototype.beforeVisitDeclarator=function(a){this.currentFrame_.push(a)};glslunit.VariableScopeVisitor.prototype.beforeVisitFunctionDeclaration=function(a){this.scopeParameters_=a.parameters};glslunit.VariableScopeVisitor.prototype.afterVisitFunctionDeclaration=function(){this.scopeParameters_=[]};glslunit.VariableScopeVisitor.getScopeToDeclarationMap=function(a){var f=new glslunit.VariableScopeVisitor;f.visitNode(a);return f.scopeIdToFrame_};
glslunit.VariableScopeVisitor.getVariablesInScope=function(a,f,e){f=new glslunit.VariableScopeVisitor(f,e);f.visitNode(a);return f.variablesInScope_};glslunit.Executor=function(a,f,e,h,m){this.context=a;this.sourceAst=f;this.variables=e;this.viewportHeight=h;this.viewportWidth=m;this.renameMap={}};glslunit.Executor.DecodeStatus={DISCARD:"discard",MISMATCH:"mismatch"};glslunit.Executor.TEST_VERTEX_COUNT=3;glslunit.Executor.testTriangleSource="attribute vec3 aTestTriangle;";glslunit.Executor.encodeFloatSource_="precision highp float;float upper_mask(float val, float n) {  float nShifted = exp2(n);  return fract(val/(nShifted))*nShifted;}vec4 encodeFloat(float f) {  const vec4 coding = vec4(1.0/255.0,                           255.0/256.0,                           65025.0/256.0,                           16581375.0/256.0);  vec4 result;  bool sign = f >= 0.0;  f = abs(f);  float expField = ceil(log2(max(f, 1e-32)));  f = f / exp2(expField);  result.r = ((float(sign) * 32.) + (upper_mask((expField + 16.), 5.)))     * 4. + 2.;  result.gba = vec3(f, f, f);  result = fract(result * coding);  result = floor(result * 255.0)/255.0;  return result;}";
glslunit.Executor.encodeFloatAST_=glslunit.glsl.parser.parse(glslunit.Executor.encodeFloatSource_);glslunit.Executor.decodeFloat=function(a){var f=256/255,e=Array(4);e[0]=a[0]>>2;e[1]=a[1]/255;e[2]=a[2]/255;e[3]=a[3]/255;var a=Number((e[0]&32)>0),h=Number(e[0]&31)-16,f=Number(e[1]*f/1+e[2]*f/255+e[3]*f/65025);return f==0&&a==0?glslunit.Executor.DecodeStatus.DISCARD:(-1+a*2)*Math.pow(2,h)*f};
glslunit.Executor.prototype.compileShader_=function(a,f){var e=this.context.createShader(f),h=glslunit.Generator.getSourceCode(a,"\n",true);this.context.shaderSource(e,h);this.context.compileShader(e);if(!this.context.getShaderParameter(e,this.context.COMPILE_STATUS))throw e=this.context.getShaderInfoLog(e),Error("Couldn't compile shader: "+e+"\n"+h);return e};
glslunit.Executor.prototype.setupShaderPrograms_=function(a,f){var e=this.compileShader_(a,this.context.VERTEX_SHADER),h=this.compileShader_(f,this.context.FRAGMENT_SHADER),m=this.context.createProgram();this.context.attachShader(m,e);this.context.attachShader(m,h);this.context.linkProgram(m);this.context.useProgram(m);return m};glslunit.Executor.addEncodeFunction_=function(a){return glslunit.SpliceTransformer.splice(a,a,"statements",0,0,glslunit.Executor.encodeFloatAST_.statements)};
glslunit.Executor.prototype.prepareAst=function(){var a=glslunit.glsl.parser.parse("void main()","function_prototype"),a=(new glslunit.FunctionRenameTransformer(a,"__testMain")).transformNode(this.sourceAst),f=a!=this.sourceAst,a=glslunit.Executor.addEncodeFunction_(a);return{testAst:a,foundMain:f}};
glslunit.Executor.prototype.extractValue=function(a,f){var e,h;try{var m=this.getVertexAst(a),i=this.getFragmentAst(a);e=this.setupShaderPrograms_(m,i);this.context.clearColor(0,0,0,0);this.context.enable(this.context.DEPTH_TEST);this.context.viewport(0,0,this.viewportWidth,this.viewportHeight);this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT);var p=glslunit.VariableScopeVisitor.getVariablesInScope(m,m,true),q=glslunit.VariableScopeVisitor.getVariablesInScope(i,i,true),
o;for(o in q)q[o].typeAttribute.qualifier=="uniform"&&(p[o]=q[o]);var y=0;goog.array.forEach(this.variables,function(a){a.setGlobalVariables(p,this.renameMap);a.getLocation(this.context,e)!=null&&(a.bufferData(this.context,e,glslunit.Executor.TEST_VERTEX_COUNT,y),a.getIsTexture()&&y++)},this);h=new glslunit.NumberShaderVariable("aTestTriangle",null);h.setGlobalVariables(p,this.renameMap);h.bufferAttribute(this.context,e,glslunit.Executor.TEST_VERTEX_COUNT,new Float32Array([-1,1,0,-1,-1,0,1,1,0]));
goog.array.forEach(this.variables,function(a){a.getLocation(this.context,e)!=null&&a.bindData(this.context,e)},this);h.bindData(this.context,e);this.context.drawArrays(this.context.TRIANGLE_STRIP,0,glslunit.Executor.TEST_VERTEX_COUNT);var t=[new Uint8Array(4),new Uint8Array(4),new Uint8Array(4)];this.context.readPixels(0,1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,t[0]);this.context.readPixels(0,this.viewportHeight-1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,t[1]);this.context.readPixels(this.viewportWidth-
2,this.viewportHeight-1,1,1,this.context.RGBA,this.context.UNSIGNED_BYTE,t[2]);var u=goog.array.equals(t[0],t[1])&&goog.array.equals(t[0],t[2]);return!goog.isDef(f)&&!u?glslunit.Executor.DecodeStatus.MISMATCH:glslunit.Executor.decodeFloat(t[f||0])}finally{goog.array.forEach(this.variables,function(a){a.cleanUp(this.context)},this),e&&this.context.deleteProgram(e),h&&h.cleanUp(this.context)}};glslunit.testing.Expectation=function(){this.testPassed=false};glslunit.testing.Expectation.prototype.getTestPassed=function(){return this.testPassed};glslunit.testing.DiscardExpectation=function(){glslunit.testing.Expectation.call(this)};goog.inherits(glslunit.testing.DiscardExpectation,glslunit.testing.Expectation);glslunit.testing.DiscardExpectation.prototype.run=function(a){var f=glslunit.glsl.parser.parse("vec4(0.,1.,0.,1.)","assignment_expression");this.testPassed=a.extractValue(f)==glslunit.Executor.DecodeStatus.DISCARD};glslunit.testing.DiscardExpectation.prototype.getFailureString=function(){return"Expected shader would discard but it didn't"};goog.string.format=function(a,f){var e=Array.prototype.slice.call(arguments),h=e.shift();if(typeof h=="undefined")throw Error("[goog.string.format] Template required");return h.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(a,f,h,q,o,y,t,u){if(y=="%")return"%";var w=e.shift();if(typeof w=="undefined")throw Error("[goog.string.format] Not enough arguments");arguments[0]=w;return goog.string.format.demuxes_[y].apply(null,arguments)})};goog.string.format.demuxes_={};
goog.string.format.demuxes_.s=function(a,f,e){if(isNaN(e)||e==""||a.length>=e)return a;f.indexOf("-",0)>-1?a+=goog.string.repeat(" ",e-a.length):a=goog.string.repeat(" ",e-a.length)+a;return a};
goog.string.format.demuxes_.f=function(a,f,e,h,m){h=a.toString();isNaN(m)||m==""||(h=a.toFixed(m));var i;i=a<0?"-":f.indexOf("+")>=0?"+":f.indexOf(" ")>=0?" ":"";a>=0&&(h=i+h);if(isNaN(e)||h.length>=e)return h;h=isNaN(m)?Math.abs(a).toString():Math.abs(a).toFixed(m);a=e-h.length-i.length;f.indexOf("-",0)>=0?h=i+h+goog.string.repeat(" ",a):(f=f.indexOf("0",0)>=0?"0":" ",h=i+goog.string.repeat(f,a)+h);return h};
goog.string.format.demuxes_.d=function(a,f,e,h,m,i,p,q){return goog.string.format.demuxes_.f(parseInt(a,10),f,e,h,0,i,p,q)};goog.string.format.demuxes_.i=goog.string.format.demuxes_.d;goog.string.format.demuxes_.u=goog.string.format.demuxes_.d;glslunit.NodeCollector=function(a){glslunit.ASTVisitor.call(this);this.collectedNodes_=[];this.filterFunction_=a};goog.inherits(glslunit.NodeCollector,glslunit.ASTVisitor);glslunit.NodeCollector.prototype.maybeCollectNode_=function(a){this.filterFunction_(a)&&this.collectedNodes_.push(a);this.genericVisitor(a)};glslunit.NodeCollector.prototype.getCollectedNodes=function(){return this.collectedNodes_};glslunit.NodeCollector.prototype.getVisitFunction=function(){return this.maybeCollectNode_};
glslunit.NodeCollector.collectNodes=function(a,f){var e=new glslunit.NodeCollector(f);e.visitNode(a);return e.getCollectedNodes()};glslunit.IdentifierRenameTransformer=function(a,f){glslunit.ASTTransformer.call(this);this.oldName_=a;this.newName_=f};goog.inherits(glslunit.IdentifierRenameTransformer,glslunit.ASTTransformer);glslunit.IdentifierRenameTransformer.prototype.transformIdentifier=function(a){if(a.name==this.oldName_)a=glslunit.ASTTransformer.cloneNode(a),a.name=this.newName_;return a};glslunit.IdentifierRenameTransformer.renameVariable=function(a,f,e){return(new glslunit.IdentifierRenameTransformer(f,e)).transformNode(a)};glslunit.QualifierTransformer=function(a,f){glslunit.ASTTransformer.call(this);this.oldQualifier_=a;this.newQualifier_=f;this.transformedList_=[]};goog.inherits(glslunit.QualifierTransformer,glslunit.ASTTransformer);glslunit.QualifierTransformer.prototype.transformType=function(a){if(a.qualifier==this.oldQualifier_)a=glslunit.ASTTransformer.cloneNode(a),a.qualifier=this.newQualifier_;return a};glslunit.FragmentExecutor=function(a,f,e,h,m){var i=f,p={};goog.array.forEach(["varying mediump vec4 gl_FragCoord;","varying bool gl_FrontFacing;","varying mediump vec2 gl_PointCoord;"],function(a){var a=glslunit.glsl.parser.parse(a,"global_declaration"),e=a.declarators[0].name.name,f="__"+e,h=glslunit.IdentifierRenameTransformer.renameVariable(i,e,f);h!=i&&(h=glslunit.SpliceTransformer.splice(h,h,"statements",0,0,[a]),h=glslunit.IdentifierRenameTransformer.renameVariable(h,e,f),p[e]=f);i=h});i=(new glslunit.QualifierTransformer("varying",
"uniform")).transformNode(i);glslunit.Executor.call(this,a,i,e,h,m);for(var q in p)this.renameMap[q]=p[q]};goog.inherits(glslunit.FragmentExecutor,glslunit.Executor);glslunit.FragmentExecutor.vertexSource_=glslunit.Executor.testTriangleSource+"void main(void) {  gl_Position = vec4(aTestTriangle, 1.);}";glslunit.FragmentExecutor.vertexAst_=glslunit.glsl.parser.parse(glslunit.FragmentExecutor.vertexSource_,"vertex_start");
glslunit.FragmentExecutor.prototype.getFragmentAst=function(a){var f=this.prepareAst(),e=f.testAst,a=goog.string.format("void main() {"+(f.foundMain?"  __testMain();":"")+"  gl_FragColor = encodeFloat(float(%s));}",glslunit.Generator.getSourceCode(a)),a=glslunit.glsl.parser.parse(a,"fragment_start");[].push.apply(e.statements,a.statements);return e};glslunit.FragmentExecutor.prototype.getVertexAst=function(){return glslunit.FragmentExecutor.vertexAst_};glslunit.testing.ComparisonTester=function(){this.operator_="";this.values_=[];this.epsilon_=0;this.vectorComparisonType_="all"};glslunit.testing.ComparisonTester.OperatorToFunction={"<":"lessThan","<=":"lessThanEqual",">":"greaterThan",">=":"greaterThanEqual","==":"equal","!=":"notEqual"};glslunit.testing.ComparisonTester.prototype.getValues=function(){return this.values_};glslunit.testing.ComparisonTester.prototype.getEpsilon=function(){return this.epsilon_};
glslunit.testing.ComparisonTester.prototype.getOperator=function(){return this.operator_};glslunit.testing.ComparisonTester.prototype.getEpsilonDirection_=function(){var a;switch(this.operator_){case "<":case "<=":a="-";break;case ">":case ">=":a="+"}return a};
glslunit.testing.ComparisonTester.prototype.getVectorTestSource_=function(a){var f="",f="vec"+this.values_.length,e=this.getEpsilonDirection_();e?f=goog.string.format("%s(%s(%s %s %s, %s(%s)))",this.vectorComparisonType_,glslunit.testing.ComparisonTester.OperatorToFunction[this.operator_],glslunit.Generator.getSourceCode(a),e,glslunit.Generator.formatFloat(this.epsilon_),f,this.values_.map(glslunit.Generator.formatFloat).join(",")):(f=goog.string.format("%s(lessThanEqual(abs(%s - %s(%s)), %s(%s)))",
this.vectorComparisonType_,glslunit.Generator.getSourceCode(a),f,this.values_.map(glslunit.Generator.formatFloat).join(","),f,goog.array.repeat(this.epsilon_,this.values_.length).map(glslunit.Generator.formatFloat).join(",")),this.operator_=="!="&&(f="!"+f));return f};
glslunit.testing.ComparisonTester.prototype.getScalarTestSource_=function(a){var f=this.getEpsilonDirection_();f?a=goog.string.format("%s %s %s %s %s",glslunit.Generator.getSourceCode(a),f,glslunit.Generator.formatFloat(this.epsilon_),this.operator_,glslunit.Generator.formatFloat(this.values_)):(a=goog.string.format("(abs(%s - %s) <= %s)",glslunit.Generator.getSourceCode(a),glslunit.Generator.formatFloat(this.values_),glslunit.Generator.formatFloat(this.epsilon_)),this.operator_=="!="&&(a="!"+a));
return a};glslunit.testing.ComparisonTester.prototype.getTestAstNode=function(a){a=goog.isArray(this.values_)?this.getVectorTestSource_(a):this.getScalarTestSource_(a);return glslunit.glsl.parser.parse(a,"assignment_expression")};glslunit.testing.ComparisonTester.prototype.setOperator_=function(a,f){this.operator_=a;this.values_=f;return this};glslunit.testing.ComparisonTester.prototype.all=function(){this.vectorComparisonType_="all";return this};
glslunit.testing.ComparisonTester.prototype.any=function(){this.vectorComparisonType_="any";return this};glslunit.testing.ComparisonTester.prototype.withEpsilonOf=function(a){this.epsilon_=Math.max(0,a);return this};glslunit.testing.ComparisonTester.prototype.lessThan=function(a){return this.setOperator_("<",a)};glslunit.testing.ComparisonTester.prototype.lessThanEqual=function(a){return this.setOperator_("<=",a)};
glslunit.testing.ComparisonTester.prototype.greaterThan=function(a){return this.setOperator_(">",a)};glslunit.testing.ComparisonTester.prototype.greaterThanEqual=function(a){return this.setOperator_(">=",a)};glslunit.testing.ComparisonTester.prototype.equal=function(a){return this.setOperator_("==",a)};glslunit.testing.ComparisonTester.prototype.notEqual=function(a){return this.setOperator_("!=",a)};glslunit.testing.ValueBeingTested=function(){};glslunit.testing.ValueBeingTested.prototype.getValueAst=function(){};glslunit.testing.ComparisonExpectation=function(a){glslunit.testing.Expectation.call(this);this.value_=a;this.test_=new glslunit.testing.ComparisonTester;this.actualValue_=[];this.extractedMismatch_=false};goog.inherits(glslunit.testing.ComparisonExpectation,glslunit.testing.Expectation);glslunit.testing.ComparisonExpectation.prototype.getTest=function(){return this.test_};
glslunit.testing.ComparisonExpectation.prototype.run=function(a){var f=this.value_.getValueAst(),f=a.extractValue(this.test_.getTestAstNode(f));this.testPassed=Math.round(f)==1;if(f==glslunit.Executor.DecodeStatus.MISMATCH)this.actualValue_=glslunit.Executor.DecodeStatus.MISMATCH;else if(!this.testPassed)this.actualValue_=this.extractActualValue_(a);if(this.actualValue_==glslunit.Executor.DecodeStatus.MISMATCH)this.actualValue_=this.extractMismatch_(a)};
glslunit.testing.ComparisonExpectation.prototype.extractMismatch_=function(a){this.extractedMismatch_=true;for(var f=[],e=0;e<glslunit.Executor.TEST_VERTEX_COUNT;e++)f.push(this.extractActualValue_(a,e));return f};
glslunit.testing.ComparisonExpectation.prototype.extractActualValue_=function(a,f){var e,h=this.value_.getValueAst(),m=this.test_.getValues();if(goog.isArray(m)){e=[];for(var h=glslunit.Generator.getSourceCode(h),i=0;i<m.length;i++){var p=glslunit.glsl.parser.parse(h+"["+i+"]","assignment_expression"),p=a.extractValue(p,f);if(p==glslunit.Executor.DecodeStatus.MISMATCH)return p;e.push(p)}}else e=a.extractValue(h,f);return e};
glslunit.testing.ComparisonExpectation.prototype.getFailureString=function(){var a=glslunit.Generator.getSourceCode(this.value_.getValueAst()),f=Math.round(Math.log(Math.max(0.1,this.test_.getEpsilon()))/Math.LN10),e=function(a){if(goog.isArray(a))return a.map(e);if(!goog.isNumber(a))return a;var m=Math.pow(10,-1*f);return Math.round(a*m)/m},a="Expected "+a+" "+this.test_.getOperator()+" "+this.test_.getValues()+" with allowable error of "+this.test_.getEpsilon();return this.extractedMismatch_?"There was a mismatch between values at each test vertex.  This should not happen and usually indicates a driver bug.\n"+
a+"\n"+this.actualValue_.map(function(a,f){return"\tVertex "+f+" had value "+e(a)}).join("\n"):a+", was "+e(this.actualValue_)};glslunit.VertexExecutor=function(a,f,e,h,m){glslunit.Executor.call(this,a,f,e,h,m)};goog.inherits(glslunit.VertexExecutor,glslunit.Executor);glslunit.VertexExecutor.resultColorSource_="varying vec4 vResultColor;";glslunit.VertexExecutor.resultColorAst_=glslunit.glsl.parser.parse(glslunit.VertexExecutor.resultColorSource_,"global_declaration");glslunit.VertexExecutor.fragmentSource_="precision highp float;"+glslunit.VertexExecutor.resultColorSource_+"void main(void) {  gl_FragColor = vResultColor;}";
glslunit.VertexExecutor.fragmentAst_=glslunit.glsl.parser.parse(glslunit.VertexExecutor.fragmentSource_,"fragment_start");
glslunit.VertexExecutor.prototype.getVertexAst=function(a){var f=this.prepareAst(),e=f.testAst,f=f.foundMain,e=glslunit.SpliceTransformer.splice(e,e,"statements",0,0,[glslunit.VertexExecutor.resultColorAst_]),a=goog.string.format(glslunit.Executor.testTriangleSource+"void main() {"+(f?"  __testMain();":"")+"  vResultColor = encodeFloat(float(%s));  gl_Position = vec4(aTestTriangle, 1.);}",glslunit.Generator.getSourceCode(a)),a=glslunit.glsl.parser.parse(a,"vertex_start");[].push.apply(e.statements,
a.statements);return e};glslunit.VertexExecutor.prototype.getFragmentAst=function(){return glslunit.VertexExecutor.fragmentAst_};glslunit.testing.NumericInputValue=function(a){this.shaderVariable_=a;this.bufferType_=null};glslunit.testing.NumericInputValue.prototype.bufferedAs=function(a){this.bufferType_=a;this.shaderVariable_.setBufferType(a)};glslunit.testing.NumericInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.testing.IdentityInputValue=function(a){this.shaderVariable_=a};glslunit.testing.IdentityInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.TextureShaderVariable=function(a,f,e,h){glslunit.ShaderVariable.call(this,a,true);this.height_=f;this.width_=e;this.data_=h;this.useMipmap_=false;this.parameters_=[];this.textureUnit_=this.texture_=null};goog.inherits(glslunit.TextureShaderVariable,glslunit.ShaderVariable);glslunit.TextureShaderVariable.prototype.addParameter=function(a,f,e){this.parameters_.push({name:a,value:f,isFloat:e})};glslunit.TextureShaderVariable.prototype.setUseMipmap=function(a){this.useMipmap_=a};
glslunit.TextureShaderVariable.prototype.bufferData=function(a,f,e,h){this.texture_=a.createTexture();this.textureUnit_=h;a.bindTexture(a.TEXTURE_2D,this.texture_);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width_,this.height_,0,a.RGBA,a.UNSIGNED_BYTE,this.data_);goog.array.forEach(this.parameters_,function(e){(e.isFloat?a.texParameterf:a.texParameteri).apply(a,[a.TEXTURE_2D,e.name,e.value])},this);this.useMipmap_&&a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null)};
glslunit.TextureShaderVariable.prototype.bindData=function(a,f){if(this.getTypeName()!="sampler2D")throw this.getName()+" was bound as a texture, but is a "+this.getTypeName();this.texture_&&this.textureUnit_!=null&&(a.activeTexture(a["TEXTURE"+this.textureUnit_]),a.bindTexture(a.TEXTURE_2D,this.texture_),a.uniform1i(this.getLocation(a,f),this.textureUnit_))};
glslunit.TextureShaderVariable.prototype.cleanUp=function(a){glslunit.TextureShaderVariable.superClass_.cleanUp.call(this,a);this.texture_&&a.deleteTexture(this.texture_)};glslunit.testing.TextureInputValue=function(a){this.shaderVariable_=a};glslunit.testing.TextureInputValue.prototype.texParameteri=function(a,f){this.shaderVariable_.addParameter(a,f,false);return this};glslunit.testing.TextureInputValue.prototype.texParameterf=function(a,f){this.shaderVariable_.addParameter(a,f,true);return this};glslunit.testing.TextureInputValue.prototype.withMipmap=function(){this.shaderVariable_.setUseMipmap(true);return this};
glslunit.testing.TextureInputValue.prototype.getShaderVariable=function(){return this.shaderVariable_};glslunit.UploadedTextureVariable=function(a,f){glslunit.ShaderVariable.call(this,a,true);this.texture_=f;this.textureUnit_=null};goog.inherits(glslunit.UploadedTextureVariable,glslunit.ShaderVariable);glslunit.UploadedTextureVariable.prototype.bufferData=function(a,f,e,h){this.textureUnit_=h};
glslunit.UploadedTextureVariable.prototype.bindData=function(a,f){this.texture_&&this.textureUnit_!=null&&(a.activeTexture(a.TEXTURE0+this.textureUnit_),a.bindTexture(a.TEXTURE_2D,this.texture_),a.uniform1i(this.getLocation(a,f),this.textureUnit_))};glslunit.UploadedTextureVariable.prototype.cleanUp=function(){};glslunit.testing.UntypedValue=function(a){this.variableName_=a;this.typedTestValue_=null};glslunit.testing.UntypedValue.prototype.asSingleColor=function(a){if(a.length!=4)throw"Error while creating a Single Color for "+this.variableName_+": Expected 4 components but found "+a.length+" components.";a=new glslunit.TextureShaderVariable(this.variableName_,1,1,new Uint8Array(a));return this.typedTestValue_=new glslunit.testing.TextureInputValue(a)};
glslunit.testing.UntypedValue.prototype.as2DTexture=function(a,f,e){var h=4*f*e;if(a.length!=h)throw"Error while creating a 2D Texture for "+this.variableName_+": Expected "+h+" components but found "+a.length+" components.";a=new glslunit.TextureShaderVariable(this.variableName_,f,e,new Uint8Array(a));return this.typedTestValue_=new glslunit.testing.TextureInputValue(a)};
glslunit.testing.UntypedValue.prototype.asUploadedTexture=function(a){a=new glslunit.UploadedTextureVariable(this.variableName_,a);this.typedTestValue_=new glslunit.testing.IdentityInputValue(a)};glslunit.testing.UntypedValue.prototype.asArray=function(a){a=new glslunit.NumberShaderVariable(this.variableName_,a);return this.typedTestValue_=new glslunit.testing.NumericInputValue(a)};glslunit.testing.UntypedValue.prototype.asNumber=function(a){return this.asArray([a])};
glslunit.testing.UntypedValue.prototype.asIdentityMatrix=function(){return this.asArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};glslunit.testing.UntypedValue.prototype.asBoolean=function(a){return this.asArray([Number(a)])};glslunit.testing.UntypedValue.prototype.getShaderVariable=function(){return this.typedTestValue_.shaderVariable_};glslunit.testing.GlobalValue=function(a){this.valueSource_=a};glslunit.testing.GlobalValue.prototype.getValueAst=function(){return glslunit.glsl.parser.parse(this.valueSource_,"assignment_expression")};glslunit.testing.TestCase=function(a,f,e,h,m,i,p){this.context_=a;this.viewportHeight_=f;this.viewportWidth_=e;this.testType_=h;this.sourceAst_=m;this.description_=i;this.testFn_=p;this.values_={};this.defines_=[];this.expectations_=[];this.testPassed_=false};glslunit.testing.TestCase.TestType={VERTEX:0,FRAGMENT:1};glslunit.testing.TestCase.prototype.getDescription=function(){return this.description_};glslunit.testing.TestCase.prototype.getTestPassed=function(){return this.testPassed_};
glslunit.testing.TestCase.prototype.getExpectations=function(){return this.expectations_};
glslunit.testing.TestCase.prototype.run=function(){window.define=goog.bind(function(a){this.defines_.push(a)},this);window.set=goog.bind(function(a){var e=new glslunit.testing.UntypedValue(a);return this.values_[a]=e},this);window.expect=goog.bind(function(a){a=new glslunit.testing.GlobalValue(a);a=new glslunit.testing.ComparisonExpectation(a);this.expectations_.push(a);return a.getTest()},this);if(this.testType_==glslunit.testing.TestCase.TestType.FRAGMENT)window.expectDiscard=goog.bind(function(){var a=
new glslunit.testing.DiscardExpectation;this.expectations_.push(a);return a},this);this.expectations_=[];this.values_=[];this.defines_=[];this.testFn_(this.context_);delete window.define;delete window.set;delete window.expect;delete window.expectDiscard;var a=[],f;for(f in this.values_)a.push(this.values_[f].getShaderVariable());f=this.sourceAst_;if(this.defines_.length>0){var e=this.defines_.map(function(a){return"#define "+a}).join("\n"),e=glslunit.glsl.parser.parse(e).statements;f=glslunit.SpliceTransformer.splice(f,
f,"statements",0,0,e)}var h=new (this.testType_==glslunit.testing.TestCase.TestType.FRAGMENT?glslunit.FragmentExecutor:glslunit.VertexExecutor)(this.context_,f,a,this.viewportHeight_,this.viewportWidth_);this.testPassed_=true;goog.array.forEach(this.expectations_,function(a){a.run(h);this.testPassed_=this.testPassed_&&a.getTestPassed()},this);return this.testPassed_};glslunit.testing.TestSuite=function(a,f,e,h,m,i,p){this.context_=a;this.viewportHeight_=f;this.viewportWidth_=e;this.testType_=h;this.sourceAst_=glslunit.glsl.parser.parse(i,h==glslunit.testing.TestCase.TestType.FRAGMENT?"fragment_start":"vertex_start");this.testCases_=[];this.suitePassed_=false;this.testSuiteFn_=p;this.description_=m};glslunit.testing.TestSuite.prototype.getDescription=function(){return this.description_};glslunit.testing.TestSuite.prototype.getSuitePassed=function(){return this.suitePassed_};
glslunit.testing.TestSuite.prototype.getTestCases=function(){return this.testCases_};
glslunit.testing.TestSuite.prototype.run=function(){window.testMain=goog.bind(function(a,f){this.testCases_.push(new glslunit.testing.TestCase(this.context_,this.viewportHeight_,this.viewportWidth_,this.testType_,this.sourceAst_,a,f))},this);this.testCases_=[];this.testSuiteFn_(this.context_);delete window.testMain;this.suitePassed_=true;goog.array.forEach(this.testCases_,function(a){a.run();this.suitePassed_=this.suitePassed_&&a.getTestPassed()},this);return this.suitePassed_};
